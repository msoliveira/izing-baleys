'use strict';const m=b,n=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=-parseInt(k(0xba))/0x1*(parseInt(l(0xc2))/0x2)+parseInt(l(0xc6))/0x3+parseInt(l(0xc3))/0x4*(parseInt(l(0xc4))/0x5)+parseInt(l(0xb2))/0x6*(-parseInt(l(0xc8))/0x7)+-parseInt(k(0xb7))/0x8+-parseInt(k(0xcc))/0x9*(-parseInt(k(0xbd))/0xa)+parseInt(k(0xb3))/0xb*(parseInt(k(0xc9))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xf18bd));var __importDefault=this&&this[m(0xcd)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[n(0xc1)](exports,n(0xce),{'value':!![]}),exports['StartMessengerBot']=void 0x0;function a(){const s=['__esModule','./MessengerSendMessagesSystem','ConexÃ£o\x20Messenger\x20iniciada\x20|\x20Empresa:\x20','ERROR_CONNECT_WABA_360:\x20','info','update','CHECK_INTERVAL','logger','2085078ktbxza','330cqHKfp','tenantId','../../libs/messengerBot','env','10076592bxTOZO','../../errors/AppError','getIO','149ohYeMz','initMessengerBot','../../libs/socket','98870IzjmIx','ERROR\x20Messenger:\x20checkMessages\x20Tenant:\x20','CONNECTED','default','defineProperty','20456YdwxvZ','476iIMIdk','20725EBvrNj','StartMessengerBot','2136018lgtELr','SetWebHookUrl\x20360\x20|\x20Error:\x20','7qEbilf','402792JFNqum',':whatsappSession','emit','1737AtDERE','__importDefault'];a=function(){return s;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0xad;let h=e[f];return h;},b(c,d);}const AppError_1=__importDefault(require(n(0xb8))),messengerBot_1=require(n(0xb5)),socket_1=require(m(0xbc)),logger_1=require('../../utils/logger'),MessengerSendMessagesSystem_1=__importDefault(require(m(0xcf))),checkingMessenger={},messengerCheckMessages=async(c,d)=>{const o=m,p=n;if(checkingMessenger[d])return;checkingMessenger[d]=!![];try{await(0x0,MessengerSendMessagesSystem_1['default'])(c,d);}catch(e){logger_1[o(0xb1)]['error'](p(0xbe)+d+'::',e);}checkingMessenger[d]=![];},StartMessengerBot=async c=>{const q=n,r=n,d=(0x0,socket_1[q(0xb9)])();await c[r(0xaf)]({'status':'OPENING'}),d['emit'](c['tenantId']+':whatsappSession',{'action':q(0xaf),'session':c});try{const e='';logger_1['logger'][r(0xae)](q(0xd0)+c[q(0xb4)]);const f=await(0x0,messengerBot_1[q(0xbb)])(c);await c[r(0xaf)]({'status':q(0xbf),'number':e}),setInterval(messengerCheckMessages,+(process[q(0xb6)][q(0xb0)]||0x1388),f,c[r(0xb4)]),d[q(0xcb)](c[r(0xb4)]+q(0xca),{'action':q(0xaf),'session':c});}catch(g){logger_1['logger']['error'](q(0xc7)+g),await c[r(0xaf)]({'status':'DISCONNECTED'}),d[r(0xcb)](c['tenantId']+q(0xca),{'action':r(0xaf),'session':c});throw new AppError_1[(r(0xc0))](q(0xad)+g,0x194);}};exports[m(0xc5)]=StartMessengerBot;