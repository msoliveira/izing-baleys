'use strict';const m=b,o=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=-parseInt(k(0x12c))/0x1*(parseInt(l(0x127))/0x2)+-parseInt(k(0x116))/0x3*(parseInt(l(0x122))/0x4)+-parseInt(l(0x120))/0x5*(parseInt(l(0x125))/0x6)+-parseInt(l(0x137))/0x7+-parseInt(l(0x136))/0x8*(parseInt(l(0x128))/0x9)+parseInt(k(0x135))/0xa+parseInt(k(0x124))/0xb;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x71887));function a(){const t=['../../utils/logger','632920uZUcAn','52424tFwjXz','4915022yLixvU','88416WWrouN','ERROR\x20Messenger:\x20checkMessages\x20Tenant:\x20','getIO','__importDefault','CONNECTED','__esModule','ConexÃ£o\x20Messenger\x20iniciada\x20|\x20Empresa:\x20','update','../../libs/messengerBot','error','5CgxJgm','./MessengerSendMessagesSystem','20wSceKK','logger','36725667EbXBhL','5303478DBbMde','ERROR_CONNECT_WABA_360:\x20','119194TsSMEM','1080nmHccL',':whatsappSession','emit','DISCONNECTED','7XXTGbK','SetWebHookUrl\x20360\x20|\x20Error:\x20','initMessengerBot','tenantId','defineProperty','StartMessengerBot','CHECK_INTERVAL','info'];a=function(){return t;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0x116;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this[m(0x119)]||function(c){const n=m;return c&&c[n(0x11b)]?c:{'default':c};};Object[m(0x130)](exports,m(0x11b),{'value':!![]}),exports[m(0x131)]=void 0x0;const AppError_1=__importDefault(require('../../errors/AppError')),messengerBot_1=require(o(0x11e)),socket_1=require('../../libs/socket'),logger_1=require(m(0x134)),MessengerSendMessagesSystem_1=__importDefault(require(m(0x121))),checkingMessenger={},messengerCheckMessages=async(c,d)=>{const p=m,q=m;if(checkingMessenger[d])return;checkingMessenger[d]=!![];try{await(0x0,MessengerSendMessagesSystem_1['default'])(c,d);}catch(e){logger_1[p(0x123)][q(0x11f)](q(0x117)+d+'::',e);}checkingMessenger[d]=![];},StartMessengerBot=async c=>{const r=m,s=m,d=(0x0,socket_1[r(0x118)])();await c['update']({'status':'OPENING'}),d[r(0x12a)](c[s(0x12f)]+r(0x129),{'action':s(0x11d),'session':c});try{const e='';logger_1['logger'][s(0x133)](r(0x11c)+c[r(0x12f)]);const f=await(0x0,messengerBot_1[r(0x12e)])(c);await c[r(0x11d)]({'status':r(0x11a),'number':e}),setInterval(messengerCheckMessages,+(process['env'][s(0x132)]||0x1388),f,c[s(0x12f)]),d['emit'](c[r(0x12f)]+s(0x129),{'action':s(0x11d),'session':c});}catch(g){logger_1[r(0x123)][s(0x11f)](s(0x12d)+g),await c[r(0x11d)]({'status':r(0x12b)}),d[s(0x12a)](c[r(0x12f)]+r(0x129),{'action':s(0x11d),'session':c});throw new AppError_1['default'](s(0x126)+g,0x194);}};exports[o(0x131)]=StartMessengerBot;