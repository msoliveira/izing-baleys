'use strict';const m=b,n=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0x194))/0x1+-parseInt(k(0x198))/0x2*(parseInt(l(0x18d))/0x3)+-parseInt(k(0x196))/0x4*(-parseInt(k(0x180))/0x5)+parseInt(l(0x183))/0x6*(-parseInt(l(0x17d))/0x7)+-parseInt(l(0x18e))/0x8*(parseInt(k(0x185))/0x9)+-parseInt(k(0x18f))/0xa*(-parseInt(l(0x17f))/0xb)+-parseInt(k(0x192))/0xc*(-parseInt(l(0x17b))/0xd);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xc243e));var __importDefault=this&&this[m(0x190)]||function(c){return c&&c['__esModule']?c:{'default':c};};function b(c,d){const e=a();return b=function(f,g){f=f-0x17b;let h=e[f];return h;},b(c,d);}Object['defineProperty'](exports,m(0x181),{'value':!![]});const sequelize_1=require(m(0x188)),socketEmit_1=__importDefault(require(m(0x195))),Contact_1=__importDefault(require(m(0x187))),Message_1=__importDefault(require('../../models/Message')),Ticket_1=__importDefault(require(m(0x17c))),MessengerMarkRead=async(c,d)=>{const o=m,p=m,e=await Message_1[o(0x184)][p(0x18b)]({'where':{'tenantId':d,'createdAt':{[sequelize_1['Op'][p(0x191)]]:new Date(c[o(0x193)][o(0x17e)])},'fromMe':!![],'ack':{[sequelize_1['Op']['in']]:[0x1,0x2]}},'include':[{'model':Ticket_1['default'],'where':{'tenantId':d},'include':[{'model':Contact_1[o(0x184)],'where':{'tenantId':d,'messengerId':c[o(0x189)]['id']}}]}]});await Promise['all'](e[o(0x18c)](async f=>{const q=p,r=p;await f['update']({'ack':0x3}),(0x0,socketEmit_1[q(0x184)])({'tenantId':d,'type':q(0x18a),'payload':{...f['dataValues'],'mediaUrl':f[q(0x197)],'id':f['id'],'timestamp':f[r(0x182)],'messageId':f[r(0x186)],'status':'sended','ack':0x3}});}));};function a(){const s=['4129680MQiZYe','mediaUrl','290FieXrC','23608Ivwxtl','../../models/Ticket','14dpcYPH','watermark','22TGNiWZ','5zLRycc','__esModule','timestamp','2070342iNaKKS','default','780849prrBeX','messageId','../../models/Contact','sequelize','sender','chat:ack','findAll','map','30801JITpsi','56MiGyrT','3081210ZgJCbJ','__importDefault','lte','6528EPRsKW','read','945300puWMZH','../../helpers/socketEmit'];a=function(){return s;};return a();}exports[n(0x184)]=MessengerMarkRead;