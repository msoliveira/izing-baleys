'use strict';const n=b,p=b;(function(c,d){const l=b,m=b,e=c();while(!![]){try{const f=parseInt(l(0xca))/0x1*(-parseInt(l(0xcf))/0x2)+parseInt(l(0xcb))/0x3*(parseInt(l(0xc5))/0x4)+parseInt(m(0xd7))/0x5*(-parseInt(m(0xc6))/0x6)+parseInt(m(0xc2))/0x7+-parseInt(l(0xd0))/0x8+parseInt(m(0xd3))/0x9+parseInt(l(0xd1))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x6fc71));function b(c,d){const e=a();return b=function(f,g){f=f-0xc1;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this[n(0xdf)]||function(c){const o=n;return c&&c[o(0xcc)]?c:{'default':c};};Object['defineProperty'](exports,n(0xcc),{'value':!![]});const VerifyStepsChatFlowTicket_1=__importDefault(require(p(0xdc))),FindOrCreateTicketService_1=__importDefault(require(p(0xc7))),VerifyBusinessHours_1=__importDefault(require(p(0xc3))),ShowWhatsAppService_1=__importDefault(require(p(0xc8))),InstagramVerifyContact_1=__importDefault(require('./InstagramVerifyContact')),InstagramVerifyMediaMessage_1=__importDefault(require(p(0xc1))),InstagramVerifyMessage_1=__importDefault(require(n(0xc4))),handleRealtimeReceive=async(c,d)=>{const q=p,r=n,e=await(0x0,ShowWhatsAppService_1['default'])({'id':d['id']}),f=await d['feed'][q(0xdd)]({'thread_id':c[q(0xce)][r(0xcd)],'oldest_cursor':''})[r(0xdb)](),g=await(0x0,InstagramVerifyContact_1[q(0xde)])(f,d,e['tenantId']),h=d?.[q(0xc9)],i=h?.['pk']===c['message'][q(0xd5)],j=await(0x0,FindOrCreateTicketService_1['default'])({'contact':g,'whatsappId':d['id'],'unreadMessages':i?0x0:0x1,'tenantId':e[r(0xd2)],'msg':{...c[r(0xce)],'fromMe':i},'channel':'instagram'});if(j?.['isFarewellMessage'])return;c['message']['item_type']!==q(0xd6)?await(0x0,InstagramVerifyMediaMessage_1[q(0xde)])(c,i,j,g):await(0x0,InstagramVerifyMessage_1[r(0xde)])(c,i,j,g);const k=await d[r(0xd8)][q(0xdd)](c[q(0xce)]['thread_id']);k[r(0xda)](c['message'][q(0xd4)]),await(0x0,VerifyStepsChatFlowTicket_1['default'])({'fromMe':i,'body':c[q(0xce)]?.['text']||''},j),await(0x0,VerifyBusinessHours_1[q(0xde)])({'fromMe':i,'timestamp':c['message'][q(0xd9)]/0x3e8},j);};function a(){const s=['tenantId','5023953SBbmdf','item_id','user_id','text','29630yFkRPj','entity','timestamp','markItemSeen','request','../ChatFlowServices/VerifyStepsChatFlowTicket','directThread','default','__importDefault','./InstagramVerifyMediaMessage','5501006SrNNwt','../WbotServices/helpers/VerifyBusinessHours','./InstagramVerifyMessage','20XhKSdJ','204aZPlVW','../TicketServices/FindOrCreateTicketService','../WhatsappService/ShowWhatsAppService','accountLogin','25SZSxhy','502791hLfPKW','__esModule','thread_id','message','65050Fvnjij','6665280diwGyU','1235500zoRGOC'];a=function(){return s;};return a();}exports[n(0xde)]=handleRealtimeReceive;