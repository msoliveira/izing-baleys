'use strict';const m=b,n=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=-parseInt(k(0x94))/0x1+parseInt(k(0x8e))/0x2+parseInt(l(0x87))/0x3*(-parseInt(l(0x99))/0x4)+-parseInt(k(0x9b))/0x5*(parseInt(l(0x9e))/0x6)+parseInt(l(0x85))/0x7+parseInt(l(0x92))/0x8*(parseInt(l(0x8b))/0x9)+parseInt(l(0x81))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xcb921));function a(){const s=['9136736apybEl','__esModule','3CiOOfP','StartInstaBotSession\x20|\x20Error:\x20','./InstaBotMessageListener','../../errors/AppError','9sUDdPb','update','env','1293128opOHwq','StartInstaBotSession','default','info','10060784rAUJns','ConexÃ£o\x20Instagram\x20iniciada\x20|\x20Empresa:\x20','114450UaIPLw','../../utils/logger','__importDefault','./InstagramSendMessagesSystem','tenantId','5353256uIWNEN','defineProperty','185tyejbo','emit','initInstaBot','176604qmvdXO','../../libs/InstaBot','ERROR_CONNECT_INSTAGRAM:\x20','CHECK_INTERVAL','InstaBotMessageListener',':whatsappSession','logger','1662370UEHzrU','CONNECTED','../../libs/socket','error'];a=function(){return s;};return a();}var __importDefault=this&&this[m(0x96)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[n(0x9a)](exports,n(0x86),{'value':!![]}),exports['StartInstaBotSession']=void 0x0;function b(c,d){const e=a();return b=function(f,g){f=f-0x7f;let h=e[f];return h;},b(c,d);}const AppError_1=__importDefault(require(n(0x8a))),InstaBot_1=require(m(0x9f)),socket_1=require(m(0x83)),logger_1=require(m(0x95)),InstaBotMessageListener_1=require(n(0x89)),InstagramSendMessagesSystem_1=__importDefault(require(m(0x97))),checkingInstagram={},checkMessages=async(c,d)=>{const o=m,p=n;if(checkingInstagram[d])return;checkingInstagram[d]=!![];try{await(0x0,InstagramSendMessagesSystem_1[o(0x90)])(c,d);}catch(e){logger_1['logger'][p(0x84)]('ERROR:\x20checkMessages\x20Tenant:\x20'+d+'::',e);}checkingInstagram[d]=![];},StartInstaBotSession=async c=>{const q=m,r=m,d=(0x0,socket_1['getIO'])();await c[q(0x8c)]({'status':'OPENING'}),d[r(0x9c)](c['tenantId']+r(0x7f),{'action':'update','session':c});try{const e=await(0x0,InstaBot_1[q(0x9d)])(c);(0x0,InstaBotMessageListener_1[r(0xa2)])(e),setInterval(checkMessages,+(process[q(0x8d)][r(0xa1)]||0x1388),e,c[r(0x98)]),logger_1[r(0x80)][q(0x91)](r(0x93)+c[q(0x98)]),await c[r(0x8c)]({'status':q(0x82)}),d[r(0x9c)](c[r(0x98)]+q(0x7f),{'action':q(0x8c),'session':c});}catch(f){logger_1[q(0x80)][q(0x84)](q(0x88)+f),await c[q(0x8c)]({'status':'DISCONNECTED'}),d[q(0x9c)](c[q(0x98)]+q(0x7f),{'action':q(0x8c),'session':c});throw new AppError_1[(q(0x90))](q(0xa0)+f,0x194);}};exports[m(0x8f)]=StartInstaBotSession;