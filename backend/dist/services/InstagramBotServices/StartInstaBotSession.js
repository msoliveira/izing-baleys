'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0x16c;let h=e[f];return h;},b(c,d);}const m=b,o=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=-parseInt(k(0x17a))/0x1+-parseInt(k(0x17b))/0x2*(-parseInt(l(0x18a))/0x3)+-parseInt(k(0x182))/0x4+-parseInt(l(0x17e))/0x5+-parseInt(l(0x181))/0x6*(parseInt(k(0x179))/0x7)+parseInt(l(0x17d))/0x8+-parseInt(k(0x187))/0x9*(-parseInt(k(0x18d))/0xa);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x6aaf8));var __importDefault=this&&this[m(0x184)]||function(c){const n=m;return c&&c[n(0x175)]?c:{'default':c};};function a(){const t=['logger','default','10vhSWgL','./InstaBotMessageListener','DISCONNECTED','update','ConexÃ£o\x20Instagram\x20iniciada\x20|\x20Empresa:\x20','tenantId','initInstaBot','StartInstaBotSession','../../errors/AppError','./InstagramSendMessagesSystem','CONNECTED','error','__esModule','../../utils/logger','defineProperty','env','14fkLlbO','279666XZOlCn','86AICrWl','StartInstaBotSession\x20|\x20Error:\x20','4696904VGhxIN','4278090dzkjAM','ERROR:\x20checkMessages\x20Tenant:\x20',':whatsappSession','577386igxIPN','1708148yyAXDq','emit','__importDefault','../../libs/InstaBot','OPENING','13733289nDGiup','InstaBotMessageListener','info','5493RwOHqs'];a=function(){return t;};return a();}Object[m(0x177)](exports,o(0x175),{'value':!![]}),exports[o(0x170)]=void 0x0;const AppError_1=__importDefault(require(o(0x171))),InstaBot_1=require(o(0x185)),socket_1=require('../../libs/socket'),logger_1=require(m(0x176)),InstaBotMessageListener_1=require(m(0x18e)),InstagramSendMessagesSystem_1=__importDefault(require(o(0x172))),checkingInstagram={},checkMessages=async(c,d)=>{const p=m,q=o;if(checkingInstagram[d])return;checkingInstagram[d]=!![];try{await(0x0,InstagramSendMessagesSystem_1[p(0x18c)])(c,d);}catch(e){logger_1[q(0x18b)]['error'](p(0x17f)+d+'::',e);}checkingInstagram[d]=![];},StartInstaBotSession=async c=>{const r=o,s=m,d=(0x0,socket_1['getIO'])();await c[r(0x16c)]({'status':r(0x186)}),d[r(0x183)](c['tenantId']+':whatsappSession',{'action':r(0x16c),'session':c});try{const e=await(0x0,InstaBot_1[r(0x16f)])(c);(0x0,InstaBotMessageListener_1[s(0x188)])(e),setInterval(checkMessages,+(process[r(0x178)]['CHECK_INTERVAL']||0x1388),e,c[r(0x16e)]),logger_1['logger'][s(0x189)](r(0x16d)+c['tenantId']),await c[s(0x16c)]({'status':r(0x173)}),d[s(0x183)](c[s(0x16e)]+':whatsappSession',{'action':r(0x16c),'session':c});}catch(f){logger_1[r(0x18b)][s(0x174)](s(0x17c)+f),await c['update']({'status':r(0x18f)}),d[s(0x183)](c[s(0x16e)]+r(0x180),{'action':s(0x16c),'session':c});throw new AppError_1[(s(0x18c))]('ERROR_CONNECT_INSTAGRAM:\x20'+f,0x194);}};exports['StartInstaBotSession']=StartInstaBotSession;