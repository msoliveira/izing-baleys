'use strict';const F=b,H=b;(function(c,d){const D=b,E=b,e=c();while(!![]){try{const f=parseInt(D(0x1c5))/0x1*(parseInt(E(0x1d2))/0x2)+parseInt(D(0x1cc))/0x3*(parseInt(D(0x1d7))/0x4)+-parseInt(E(0x1bf))/0x5+-parseInt(E(0x1c9))/0x6+-parseInt(E(0x1d1))/0x7+-parseInt(D(0x1e0))/0x8*(-parseInt(E(0x1c4))/0x9)+parseInt(E(0x1d0))/0xa*(-parseInt(E(0x1d9))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x24494));function b(c,d){const e=a();return b=function(f,g){f=f-0x1ba;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this[F(0x1d6)]||function(c){const G=F;return c&&c[G(0x1dc)]?c:{'default':c};};Object[H(0x1ca)](exports,F(0x1dc),{'value':!![]});const AppError_1=__importDefault(require(H(0x1ce))),Campaign_1=__importDefault(require(H(0x1c3))),logger_1=require(F(0x1df)),cArquivoName=c=>{const I=F,J=H;if(!c)return'';const d=c[I(0x1dd)]('/'),e=d[d[J(0x1ba)]-0x1];return e;},UpdateCampaignService=async({campaignData:c,medias:d,campaignId:e,tenantId:f})=>{const K=H,L=H;let g,h={...c,'mediaUrl':cArquivoName(c['mediaUrl']),'start':c['start']};const i=await Campaign_1[K(0x1db)][L(0x1be)]({'where':{'id':e,'tenantId':f}});if(i?.[L(0x1c7)]!=='pending'&&i?.['status']!=='canceled'){if(L(0x1cb)===K(0x1d5))return g&&h[K(0x1dc)]?i:{'default':j};else throw new AppError_1[(K(0x1db))]('ERR_NO_UPDATE_CAMPAIGN_NOT_IN_CANCELED_PENDING',0x194);}if(d&&Array[K(0x1d3)](d)&&d['length'])await Promise[L(0x1c2)](d[L(0x1cd)](async k=>{const M=K,N=L;try{if(M(0x1de)===N(0x1da)){const m=f['mimetype'][M(0x1dd)]('/')[0x1][N(0x1dd)](';')[0x0];g[M(0x1d4)]=new h()[M(0x1d8)]()+'.'+m;}else{if(!k['filename']){const m=k[M(0x1e1)]['split']('/')[0x1][M(0x1dd)](';')[0x0];k[N(0x1d4)]=new Date()['getTime']()+'.'+m;}g=k;}}catch(n){'wpmkc'==='wpmkc'?logger_1[N(0x1c0)][N(0x1cf)](n):e={...f,'mediaUrl':'','mediaType':''};}})),h={...c,'mediaUrl':g?.[K(0x1d4)],'mediaType':g?.[L(0x1e1)][L(0x1bd)](0x0,g['mimetype']['indexOf']('/'))};else c[L(0x1c6)]==='null'&&(h={...c,'mediaUrl':'','mediaType':''});if(!i){if(K(0x1bc)==='mzflz')throw new AppError_1[(L(0x1db))](K(0x1c8),0x194);else try{if(!q['filename']){const l=w[K(0x1e1)][L(0x1dd)]('/')[0x1][L(0x1dd)](';')[0x0];x['filename']=new y()[K(0x1d8)]()+'.'+l;}u=v;}catch(m){A['logger']['error'](m);}}return await i[K(0x1bb)](h),await i[L(0x1c1)](),i;};function a(){const O=['split','KJqcI','../../utils/logger','546712KcyRan','mimetype','length','update','mzflz','substr','findOne','715320qWpBfH','logger','reload','all','../../models/Campaign','27KaHdMd','5AhAdHw','mediaUrl','status','ERR_NO_CAMPAIGN_FOUND','1692kXRAQk','defineProperty','SXYuX','384cnQTSw','map','../../errors/AppError','error','10uiznrs','1507366IMgiDR','75824ZHbsLg','isArray','filename','YWbUN','__importDefault','5804vCrLYN','getTime','802923jkhGcm','xUdzM','default','__esModule'];a=function(){return O;};return a();}exports[F(0x1db)]=UpdateCampaignService;