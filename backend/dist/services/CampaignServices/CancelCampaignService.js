'use strict';const n=b,o=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0xe2))/0x1*(-parseInt(k(0xd2))/0x2)+parseInt(k(0xde))/0x3+-parseInt(k(0xd1))/0x4+-parseInt(k(0xcf))/0x5*(-parseInt(k(0xdd))/0x6)+-parseInt(l(0xe6))/0x7*(-parseInt(l(0xe4))/0x8)+parseInt(l(0xe3))/0x9+-parseInt(l(0xdb))/0xa*(parseInt(l(0xd3))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x51100));var __importDefault=this&&this['__importDefault']||function(c){const m=b;return c&&c[m(0xd6)]?c:{'default':c};};function a(){const r=['default','52224QvDbmZ','636518hFaBFX','22oMWVlH','update','ERROR:\x20','__esModule','bull','../../models/CampaignContacts','canceled','IO_REDIS_PORT','2835730dHCeEz','env','12JMWYej','1040541vgMhzQ','../../models/Campaign','findOne','IO_REDIS_DB_SESSION','1wgZNTk','5704290DyjVpX','826408DZBDsv','IO_REDIS_PASSWORD','14rfgFJH','IO_REDIS_SERVER','ERROR_CAMPAIGN_NOT_EXISTS','SendMessageWhatsappCampaign','108085gieNcj'];a=function(){return r;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0xcd;let h=e[f];return h;},b(c,d);}Object['defineProperty'](exports,n(0xd6),{'value':!![]});const bull_1=__importDefault(require(n(0xd7))),Campaign_1=__importDefault(require(n(0xdf))),AppError_1=__importDefault(require('../../errors/AppError')),CampaignContacts_1=__importDefault(require(o(0xd8))),CancelCampaignService=async({campaignId:c,tenantId:d})=>{const p=o,q=o,e=await Campaign_1[p(0xd0)][p(0xe0)]({'where':{'id':c,'tenantId':d}});if(!e)throw new AppError_1[(p(0xd0))](q(0xcd),0x194);try{await(0x0,bull_1[p(0xd0)])(q(0xce),{'redis':{'port':Number(process['env'][q(0xda)]),'host':process[q(0xdc)][p(0xe7)],'db':Number(process['env'][q(0xe1)])||0x2,'password':process[p(0xdc)][q(0xe5)]||undefined}})['removeJobs']('campaginId_'+e['id']+'*'),await CampaignContacts_1[p(0xd0)][p(0xd4)]({'body':null,'mediaName':null,'timestamp':null,'ack':0x0,'messageId':null},{'where':{'campaignId':e['id'],'messageId':null}}),await e['update']({'status':q(0xd9)});}catch(f){throw new AppError_1[(q(0xd0))](p(0xd5)+f,0x194);}};exports['default']=CancelCampaignService;