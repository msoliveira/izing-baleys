'use strict';const m=b,n=b;function b(c,d){const e=a();return b=function(f,g){f=f-0xf3;let h=e[f];return h;},b(c,d);}(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=-parseInt(k(0x102))/0x1*(parseInt(l(0xf9))/0x2)+parseInt(l(0x104))/0x3*(-parseInt(l(0xf6))/0x4)+-parseInt(l(0x10a))/0x5*(-parseInt(l(0x10e))/0x6)+-parseInt(l(0xfa))/0x7*(parseInt(l(0x111))/0x8)+-parseInt(l(0xf3))/0x9+-parseInt(k(0x105))/0xa+parseInt(l(0xf5))/0xb*(parseInt(l(0xfc))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x8fbb9));function a(){const q=['lastOnline','54872KyQBoy','createAccessToken','6321915rQfhcC','../../models/Queue','506TbNiRQ','812etCMTP','__importDefault','ERR_INVALID_CREDENTIALS','212HjKiHw','7xTcXbB','queues','794148sqgvPv','../../helpers/CreateTokens','../../errors/AppError','active','tenant','findOne','8179YGVtPZ','email','15747LRIZNH','6696780VUZDKc','default','update','checkPassword','findAll','112630dAIsfe','../../models/User','status','../../models/Tenant','228OPcoNE','createRefreshToken'];a=function(){return q;};return a();}var __importDefault=this&&this[m(0xf7)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object['defineProperty'](exports,'__esModule',{'value':!![]});const User_1=__importDefault(require(n(0x10b))),AppError_1=__importDefault(require(n(0xfe))),CreateTokens_1=require(n(0xfd)),Queue_1=__importDefault(require(m(0xf4))),Tenant_1=__importDefault(require(m(0x10d))),AuthUserService=async({email:c,password:d})=>{const o=n,p=n,e=await User_1[o(0x106)][p(0x101)]({'where':{'email':c},'include':[{'model':Queue_1[o(0x106)],'as':p(0xfb)},{'model':Tenant_1[o(0x106)],'as':p(0x100),'where':{'status':p(0xff)}}]});if(!e)throw new AppError_1[(o(0x106))]('ERR_INVALID_CREDENTIALS',0x191);if(!await e[o(0x108)](d))throw new AppError_1[(o(0x106))](o(0xf8),0x191);const f=(0x0,CreateTokens_1[o(0x112)])(e),g=(0x0,CreateTokens_1[o(0x10f)])(e);await e[o(0x107)]({'isOnline':!![],'status':'online','lastLogin':new Date()});const h=await User_1[p(0x106)][o(0x109)]({'where':{'tenantId':e['tenantId'],'isOnline':!![]},'attributes':['id',o(0x103),o(0x10c),o(0x110),'name','lastLogin']});return{'user':e,'token':f,'refreshToken':g,'usuariosOnline':h};};exports[n(0x106)]=AuthUserService;