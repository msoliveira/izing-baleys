'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0x1aa;let h=e[f];return h;},b(c,d);}const I=b,N=b;function a(){const W=['map','all','default','8vlBOXy','create','hhpQU','JQVQL','email','../../models/User','9632370NVfHHW','../../errors/AppError','upsert','queues','1160PCNKab','prototype','validate','reload','__setModuleDefault','39906954ZWusHZ','profile','5277HOXtxA','min','1086445JGdzqy','../../models/UsersQueues','message','destroy','yup','2712266eKPhkj','__importDefault','TFLua','ERR_NO_USER_FOUND','update','FbRgU','__esModule','name','gjFmb','string','hasOwnProperty','get','defineProperty','155902YNleRU','1555162UGHoWF','call','object'];a=function(){return W;};return a();}(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=-parseInt(G(0x1d1))/0x1+-parseInt(G(0x1c4))/0x2+-parseInt(G(0x1bd))/0x3*(parseInt(G(0x1b6))/0x4)+-parseInt(G(0x1bf))/0x5+-parseInt(H(0x1b2))/0x6+-parseInt(G(0x1d2))/0x7*(-parseInt(H(0x1ac))/0x8)+parseInt(H(0x1bb))/0x9;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xc61b3));var __createBinding=this&&this['__createBinding']||(Object[I(0x1ad)]?function(c,d,e,f){const J=I,K=I;if(f===undefined)f=e;var g=Object['getOwnPropertyDescriptor'](d,e);(!g||(J(0x1cf)in g?!d[J(0x1ca)]:g['writable']||g['configurable']))&&(g={'enumerable':!![],'get':function(){const L=K,M=K;if(L(0x1cc)!==L(0x1c6))return d[e];else f[M(0x1d0)](g,L(0x1ab),{'enumerable':!![],'value':h});}}),Object[K(0x1d0)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[N(0x1ba)]||(Object[N(0x1ad)]?function(c,d){const O=N,P=N;Object[O(0x1d0)](c,P(0x1ab),{'enumerable':!![],'value':d});}:function(c,d){c['default']=d;}),__importStar=this&&this['__importStar']||function(c){const Q=N,R=N;if(c&&c[Q(0x1ca)])return c;var d={};if(c!=null){for(var e in c)if(e!=='default'&&Object[Q(0x1b7)][Q(0x1ce)][R(0x1d3)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x1c5)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[N(0x1d0)](exports,N(0x1ca),{'value':!![]});const Yup=__importStar(require(I(0x1c3))),AppError_1=__importDefault(require(N(0x1b3))),Queue_1=__importDefault(require('../../models/Queue')),User_1=__importDefault(require(I(0x1b1))),UsersQueues_1=__importDefault(require(N(0x1c0))),UpdateUserService=async({userData:c,userId:d,tenantId:e})=>{const S=N,T=N,f=await User_1[S(0x1ab)]['findOne']({'where':{'id':d,'tenantId':e},'attributes':['name','id',T(0x1b0),'profile']});if(!f)throw new AppError_1['default'](S(0x1c7),0x194);const g=Yup[T(0x1d4)]()['shape']({'name':Yup['string']()[S(0x1be)](0x2),'email':Yup[T(0x1cd)]()[T(0x1b0)](),'profile':Yup[T(0x1cd)](),'password':Yup[T(0x1cd)]()}),{email:h,password:i,profile:j,name:k,queues:l}=c;try{if(T(0x1ae)===S(0x1ae))await g[T(0x1b8)]({'email':h,'password':i,'profile':j,'name':k});else throw new e[(T(0x1ab))](f?.[T(0x1c1)]);}catch(o){throw new AppError_1[(S(0x1ab))](o?.['message']);}l&&(await UsersQueues_1[S(0x1ab)][T(0x1c2)]({'where':{'userId':d}}),await Promise[T(0x1aa)](l[S(0x1d5)](async p=>{const U=T,V=T;if(U(0x1af)!==V(0x1c9)){const q=p?.['id']||p;await UsersQueues_1[U(0x1ab)][V(0x1b4)]({'queueId':q,'userId':d});}else e[V(0x1ab)]=f;})));await f[S(0x1c8)]({'email':h,'password':i,'profile':j,'name':k}),await f[T(0x1b9)]({'attributes':['id',S(0x1cb),'email',S(0x1bc)],'include':[{'model':Queue_1[S(0x1ab)],'attributes':['id','queue']}]});const m={'id':f['id'],'name':f[T(0x1cb)],'email':f[S(0x1b0)],'profile':f[T(0x1bc)],'queues':f[T(0x1b5)]};return m;};exports[I(0x1ab)]=UpdateUserService;