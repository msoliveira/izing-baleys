'use strict';const n=b,p=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x7f;let h=e[f];return h;},b(c,d);}(function(c,d){const l=b,m=b,e=c();while(!![]){try{const f=parseInt(l(0x94))/0x1*(parseInt(m(0x92))/0x2)+-parseInt(m(0x96))/0x3+parseInt(l(0x97))/0x4*(-parseInt(l(0x8a))/0x5)+-parseInt(m(0x89))/0x6*(-parseInt(m(0x91))/0x7)+-parseInt(m(0x8f))/0x8+-parseInt(l(0x87))/0x9+-parseInt(l(0x99))/0xa*(-parseInt(l(0x88))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x26911));var __importDefault=this&&this[n(0x93)]||function(c){const o=n;return c&&c[o(0x98)]?c:{'default':c};};function a(){const s=['../MessageServices/CreateMessageService','defineProperty','2683998dVmbNA','113784gIfWSO','1876620grEquC','906140azQSsm','message','message_id','update','date','1103848OJQrTr','edited_message','7gxhpYS','6FmvyHx','__importDefault','76571XoepAq','default','883881PHJDVE','4HMANSD','__esModule','510xSsnXz','received','tenantId','getTime','text','chat','../../helpers/getQuotedForMessageId'];a=function(){return s;};return a();}Object[p(0x86)](exports,p(0x98),{'value':!![]});const getQuotedForMessageId_1=__importDefault(require(n(0x84))),CreateMessageService_1=__importDefault(require(p(0x85))),VerifyMessage=async(c,d,e,f)=>{const q=p,r=n;let g,h={};g=c?.[q(0x8b)],h=c?.['update'];!g&&h&&(g=h?.[r(0x90)]);let i;if(g?.['reply_to_message']?.['message_id']){const k=await(0x0,getQuotedForMessageId_1[r(0x95)])(g['reply_to_message'][q(0x8c)],e['tenantId']);i=k?.['id']||undefined;}const j={'messageId':String(g?.[r(0x8c)]),'ticketId':e['id'],'contactId':d?undefined:f['id'],'body':g[q(0x82)],'fromMe':d,'read':d,'mediaType':q(0x83),'quotedMsgId':i,'timestamp':+g[r(0x8e)]*0x3e8,'status':r(0x7f)};await e[q(0x8d)]({'lastMessage':g[r(0x82)],'lastMessageAt':new Date()[q(0x81)](),'answered':d||![]}),await(0x0,CreateMessageService_1[q(0x95)])({'messageData':j,'tenantId':e[r(0x80)]});};exports[n(0x95)]=VerifyMessage;