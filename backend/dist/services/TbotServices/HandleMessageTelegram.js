'use strict';const q=b,r=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x6f;let h=e[f];return h;},b(c,d);}(function(c,d){const n=b,o=b,e=c();while(!![]){try{const f=parseInt(n(0x87))/0x1+-parseInt(n(0x7a))/0x2+parseInt(o(0x71))/0x3*(parseInt(o(0x77))/0x4)+parseInt(n(0x83))/0x5*(-parseInt(n(0x72))/0x6)+parseInt(n(0x7e))/0x7*(-parseInt(n(0x88))/0x8)+parseInt(n(0x7f))/0x9+parseInt(o(0x76))/0xa*(parseInt(o(0x86))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x23382));var __importDefault=this&&this['__importDefault']||function(c){const p=b;return c&&c[p(0x7c)]?c:{'default':c};};function a(){const u=['./TelegramVerifyMessage','146505gkfLwE','36tVZdEl','message','chat','tenantId','30vBNbOE','16Nbazae','date','../TicketServices/FindOrCreateTicketService','312126vjzfac','../ChatFlowServices/VerifyStepsChatFlowTicket','__esModule','telegram','49BvgCIG','16245krHuPO','./TelegramVerifyMediaMessage','default','timestamp','204390TuKbIf','update','edited_message','1008491HAmgoe','257368iXINsX','210248qHkfsi','../WhatsappService/ShowWhatsAppService','isFarewellMessage','text','../WbotServices/helpers/VerifyBusinessHours'];a=function(){return u;};return a();}Object['defineProperty'](exports,q(0x7c),{'value':!![]});const ShowWhatsAppService_1=__importDefault(require(r(0x89))),TelegramVerifyContact_1=__importDefault(require('./TelegramVerifyContact')),FindOrCreateTicketService_1=__importDefault(require(r(0x79))),TelegramVerifyMediaMessage_1=__importDefault(require(q(0x80))),TelegramVerifyMessage_1=__importDefault(require(r(0x70))),VerifyBusinessHours_1=__importDefault(require(r(0x6f))),VerifyStepsChatFlowTicket_1=__importDefault(require(q(0x7b))),HandleMessage=async(c,d)=>{const s=r,t=q,e=await(0x0,ShowWhatsAppService_1[s(0x81)])({'id':d['id']});let f,g={};f=c?.[t(0x73)],g=c?.[s(0x84)];!f&&g&&(f=g?.[s(0x85)]);const h=f?.[t(0x74)],i=await c[s(0x7d)]['getMe'](),j=i['id']===c[t(0x73)]?.['from']['id'],k={...f,'timestamp':+f[t(0x78)]*0x3e8},l=await(0x0,TelegramVerifyContact_1[s(0x81)])(c,e['tenantId']),m=await(0x0,FindOrCreateTicketService_1[t(0x81)])({'contact':l,'whatsappId':d['id'],'unreadMessages':j?0x0:0x1,'tenantId':e[s(0x75)],'msg':{...k,'fromMe':j},'channel':t(0x7d)});if(m?.[t(0x8a)])return;!k?.[s(0x8b)]&&h?.['id']?await(0x0,TelegramVerifyMediaMessage_1[t(0x81)])(c,j,m,l):await(0x0,TelegramVerifyMessage_1[t(0x81)])(c,j,m,l),await(0x0,VerifyStepsChatFlowTicket_1[t(0x81)])({'fromMe':j,'body':f['text']||''},m),await(0x0,VerifyBusinessHours_1[t(0x81)])({'fromMe':j,'timestamp':k[t(0x82)]},m);};exports[r(0x81)]=HandleMessage;