'use strict';const w=b,y=b;(function(c,d){const u=b,v=b,e=c();while(!![]){try{const f=-parseInt(u(0x11c))/0x1+-parseInt(v(0x104))/0x2+parseInt(u(0x106))/0x3+parseInt(u(0x11e))/0x4*(-parseInt(u(0x10e))/0x5)+parseInt(u(0x115))/0x6+-parseInt(v(0x109))/0x7+parseInt(u(0x11f))/0x8*(parseInt(u(0x119))/0x9);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x93dd3));function b(c,d){const e=a();return b=function(f,g){f=f-0x101;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this[w(0x113)]||function(c){const x=w;return c&&c[x(0x10c)]?c:{'default':c};};function a(){const D=['../../models/User','tlVlQ','startOfDay','number','__importDefault','true','3725376UUQUDj','contact','findAll','pending','9TgNHZY','indexOf','../../models/Queue','264380OfGkDY','parseISO','1666228YEBbDt','16957536ViawIq','defineProperty','DESC','../../models/Ticket','../../models/UsersQueues','between','../../models/Contact','open','whatsapp','profilePicUrl','pWxIO','push','name','endOfDay','1101016XQIQht','user','314277ruGClB','date-fns','MPHrI','7057757BnEZgA','queueId','forEach','__esModule','default','5MplvCb'];a=function(){return D;};return a();}Object[y(0x120)](exports,y(0x10c),{'value':!![]});const sequelize_1=require('sequelize'),date_fns_1=require(w(0x107)),Ticket_1=__importDefault(require(w(0x122))),UsersQueues_1=__importDefault(require(w(0x123))),User_1=__importDefault(require(w(0x10f))),Contact_1=__importDefault(require(w(0x125))),Queue_1=__importDefault(require(y(0x11b))),TicketsQueuesService=async({dateStart:c,dateEnd:d,status:e,userId:f,queuesIds:g,tenantId:h,showAll:i})=>{const z=w,A=w;let j={};const k=[{'model':Contact_1[z(0x10d)],'as':z(0x116),'attributes':['id',z(0x102),z(0x112),A(0x128)]},{'association':A(0x127),'attributes':['id',z(0x102)]},{'model':User_1['default'],'as':z(0x105),'attributes':['id',z(0x102),'profile']}],l=await Queue_1[z(0x10d)]['count']({'where':{'tenantId':h}});if(l){const n=await UsersQueues_1[z(0x10d)][A(0x117)]({'where':{'userId':f}});let o=n['map'](p=>p[A(0x10a)]);if(g){const p=[];g[A(0x10b)](q=>{const B=A,C=A;if(B(0x129)!==B(0x129))f={...g,'status':h};else{const s=o[C(0x11a)](+q);s&&(C(0x108)===B(0x108)?p[B(0x101)](+q):d=[B(0x126),B(0x118)]);}}),o=p;}j={...j,'queueId':{[sequelize_1['Op']['in']]:o}};}i==A(0x114)&&(j={});e?j={...j,'status':e}:e=[z(0x126),z(0x118)];c&&d&&(z(0x110)!=='tlVlQ'?d={}:j={...j,'createdAt':{[sequelize_1['Op'][z(0x124)]]:[+(0x0,date_fns_1[z(0x111)])((0x0,date_fns_1[z(0x11d)])(c)),+(0x0,date_fns_1[z(0x103)])((0x0,date_fns_1[A(0x11d)])(d))]}});const m=await Ticket_1[A(0x10d)][z(0x117)]({'where':{...j,'tenantId':h},'include':k,'order':[['updatedAt',A(0x121)]]});return m;};exports[y(0x10d)]=TicketsQueuesService;