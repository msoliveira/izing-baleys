'use strict';const m=b,o=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=-parseInt(k(0x9f))/0x1+parseInt(l(0xaa))/0x2+parseInt(k(0xa5))/0x3*(parseInt(k(0x9e))/0x4)+parseInt(k(0xac))/0x5+-parseInt(l(0xa1))/0x6+-parseInt(l(0x9d))/0x7*(-parseInt(k(0x9c))/0x8)+parseInt(k(0xa0))/0x9*(-parseInt(l(0xa6))/0xa);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x369b1));function a(){const r=['default','2031bzpXvg','10BmkVLt','defineProperty','SELECT','\x0a\x20\x20select\x0a\x20\x20\x20\x20--dt_referencia,\x0a\x20\x20\x20\x20sum(qtd_total_atendimentos)\x20qtd_total_atendimentos,\x0a\x20\x20\x20\x20sum(qtd_demanda_ativa)\x20qtd_demanda_ativa,\x0a\x20\x20\x20\x20sum(qtd_demanda_receptiva)\x20qtd_demanda_receptiva,\x0a\x20\x20\x20\x20coalesce(concat(ROUND(AVG(tma)::decimal,0),\x200),\x20\x27minutes\x27)::interval\x20TMA,\x0a\x20\x20\x20\x20coalesce(concat(ROUND(AVG(tme)::decimal,0),\x200),\x20\x27minutes\x27)::interval\x20TME,\x0a\x20\x20\x20\x20(select\x20count(1)\x0a\x20\x20\x20\x20\x20\x20from\x20\x22Contacts\x22\x20c\x0a\x20\x20\x20\x20\x20\x20where\x0a\x20\x20\x20\x20\x20\x20\x20\x20c.\x22tenantId\x22\x20=\x20:tenantId\x0a\x20\x20\x20\x20\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20c.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20)\x20new_contacts\x0a\x20\x20\x20\x20--ROUND(AVG(tma)::decimal,0)\x20TMA,\x0a\x20\x20\x20\x20--ROUND(AVG(tme)::decimal,0)\x20TME\x0a\x20\x20from\x20(\x0a\x20\x20\x20\x20select\x0a\x20\x20\x20\x20\x20\x20date_trunc(\x27month\x27,\x20t.\x22createdAt\x22)\x20dt_referencia,\x0a\x20\x20\x20\x20\x20\x201\x20qtd_total_atendimentos,\x0a\x20\x20\x20\x20\x20\x20case\x20when\x20t.\x22isActiveDemand\x22\x20is\x20true\x20then\x201\x20else\x200\x20end\x20qtd_demanda_ativa,\x0a\x20\x20\x20\x20\x20\x20case\x20when\x20t.\x22isActiveDemand\x22\x20is\x20not\x20true\x20then\x201\x20else\x200\x20end\x20qtd_demanda_receptiva,\x0a\x20\x20\x20\x20\x20\x20t.\x22createdAt\x22,\x0a\x20\x20\x20\x20\x20\x20to_timestamp(t.\x22closedAt\x22/1000)\x20closedAt,\x0a\x20\x20\x20\x20\x20\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)\x20startedAttendanceAt,\x0a\x20\x20\x20\x20\x20\x20extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60\x20tma,\x0a\x20\x20\x20\x20\x20\x20extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60\x20tme,\x0a\x20\x20\x20\x20\x20\x20t.\x22tenantId\x22\x0a\x20\x20\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20\x20\x20INNER\x20JOIN\x20\x22LogTickets\x22\x20lt\x20ON\x20lt.\x22ticketId\x22\x20=\x20t.\x22id\x22\x0a\x20\x20\x20\x20where\x0a\x20\x20\x20\x20\x20\x20t.\x22tenantId\x22\x20=\x20:tenantId\x0a\x20\x20\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20\x20\x20and\x20(lt.\x22type\x22\x20LIKE\x20\x27open\x27\x20OR\x20lt.\x22type\x22\x20LIKE\x20\x27receivedTransfer\x27)\x0a\x20\x20)\x20a\x0a\x20\x20\x20\x20--group\x20by\x20dt_referencia\x0a\x20\x20\x20\x20\x20\x20order\x20by\x201\x20Desc\x0a','679204WErGLF','admin','1802950gLrqYb','../../database','488aWvmuO','45815nNjWyc','580RXaAZh','444360NfDMjE','1209645AFjNcQ','2371032gTiESy','__importDefault','__esModule'];a=function(){return r;};return a();}var __importDefault=this&&this[m(0xa2)]||function(c){const n=m;return c&&c[n(0xa3)]?c:{'default':c};};function b(c,d){const e=a();return b=function(f,g){f=f-0x9c;let h=e[f];return h;},b(c,d);}Object[o(0xa7)](exports,o(0xa3),{'value':!![]});const sequelize_1=require('sequelize'),database_1=__importDefault(require(o(0xad))),query='\x0a\x20\x20select\x0a\x20\x20\x20\x20--dt_referencia,\x0a\x20\x20\x20\x20sum(qtd_total_atendimentos)\x20qtd_total_atendimentos,\x0a\x20\x20\x20\x20sum(qtd_demanda_ativa)\x20qtd_demanda_ativa,\x0a\x20\x20\x20\x20sum(qtd_demanda_receptiva)\x20qtd_demanda_receptiva,\x0a\x20\x20\x20\x20coalesce(concat(ROUND(AVG(tma)::decimal,0),\x200),\x20\x27minutes\x27)::interval\x20TMA,\x0a\x20\x20\x20\x20coalesce(concat(ROUND(AVG(tme)::decimal,0),\x200),\x20\x27minutes\x27)::interval\x20TME,\x0a\x20\x20\x20\x20(select\x20count(distinct(c.\x22id\x22))\x0a\x20\x20\x20\x20\x20\x20from\x20\x22Contacts\x22\x20c\x0a\x20\x20\x20\x20\x20\x20INNER\x20JOIN\x20\x22Tickets\x22\x20tc\x20ON\x20tc.\x22contactId\x22\x20=\x20c.\x22id\x22\x0a\x20\x20\x20\x20\x20\x20INNER\x20JOIN\x20\x22LogTickets\x22\x20ltc\x20ON\x20ltc.\x22ticketId\x22\x20=\x20tc.\x22id\x22\x0a\x20\x20\x20\x20\x20\x20where\x0a\x20\x20\x20\x20\x20\x20\x20\x20c.\x22tenantId\x22\x20=\x20:tenantId\x0a\x20\x20\x20\x20\x20\x20\x20\x20and\x20ltc.\x22userId\x22\x20=\x20:userId\x0a\x20\x20\x20\x20\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20c.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20)\x20new_contacts\x0a\x20\x20\x20\x20--ROUND(AVG(tma)::decimal,0)\x20TMA,\x0a\x20\x20\x20\x20--ROUND(AVG(tme)::decimal,0)\x20TME\x0a\x20\x20from\x20(\x0a\x20\x20\x20\x20select\x0a\x20\x20\x20\x20\x20\x20date_trunc(\x27month\x27,\x20t.\x22createdAt\x22)\x20dt_referencia,\x0a\x20\x20\x20\x20\x20\x201\x20qtd_total_atendimentos,\x0a\x20\x20\x20\x20\x20\x20case\x20when\x20t.\x22isActiveDemand\x22\x20is\x20true\x20then\x201\x20else\x200\x20end\x20qtd_demanda_ativa,\x0a\x20\x20\x20\x20\x20\x20case\x20when\x20t.\x22isActiveDemand\x22\x20is\x20not\x20true\x20then\x201\x20else\x200\x20end\x20qtd_demanda_receptiva,\x0a\x20\x20\x20\x20\x20\x20t.\x22createdAt\x22,\x0a\x20\x20\x20\x20\x20\x20to_timestamp(t.\x22closedAt\x22/1000)\x20closedAt,\x0a\x20\x20\x20\x20\x20\x20to_timestamp(t.\x22startedAttendanceAt\x22/1000)\x20startedAttendanceAt,\x0a\x20\x20\x20\x20\x20\x20extract(epoch\x20from\x20AGE(to_timestamp(t.\x22closedAt\x22/1000),\x20t.\x22createdAt\x22)::interval)/60\x20tma,\x0a\x20\x20\x20\x20\x20\x20extract(epoch\x20from\x20AGE(to_timestamp(t.\x22startedAttendanceAt\x22/1000),\x20t.\x22createdAt\x22::timestamp)::interval)/60\x20tme,\x0a\x20\x20\x20\x20\x20\x20t.\x22tenantId\x22\x0a\x20\x20\x20\x20from\x20\x22Tickets\x22\x20t\x0a\x20\x20\x20\x20INNER\x20JOIN\x20\x22LogTickets\x22\x20lt\x20ON\x20lt.\x22ticketId\x22\x20=\x20t.\x22id\x22\x0a\x20\x20\x20\x20where\x0a\x20\x20\x20\x20\x20\x20t.\x22tenantId\x22\x20=\x20:tenantId\x0a\x20\x20\x20\x20\x20\x20and\x20date_trunc(\x27day\x27,\x20t.\x22createdAt\x22)\x20between\x20:startDate\x20and\x20:endDate\x0a\x20\x20\x20\x20\x20\x20and\x20lt.\x22userId\x22\x20=\x20:userId\x0a\x20\x20\x20\x20\x20\x20and\x20(lt.\x22type\x22\x20LIKE\x20\x27open\x27\x20OR\x20lt.\x22type\x22\x20LIKE\x20\x27receivedTransfer\x27)\x0a\x20\x20)\x20a\x0a\x20\x20\x20\x20--group\x20by\x20dt_referencia\x0a\x20\x20\x20\x20\x20\x20order\x20by\x201\x20Desc\x0a',queryAdmin=o(0xa9),DashTicketsAndTimes=async({startDate:c,endDate:d,tenantId:e,userId:f,userProfile:g})=>{const p=o,q=o,h=await database_1[p(0xa4)]['query'](g==q(0xab)?queryAdmin:query,{'replacements':{'tenantId':e,'startDate':c,'endDate':d,'userId':f},'type':sequelize_1['QueryTypes'][q(0xa8)]});return h;};exports[m(0xa4)]=DashTicketsAndTimes;