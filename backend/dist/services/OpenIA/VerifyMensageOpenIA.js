'use strict';const o=b,p=b;(function(c,d){const l=b,m=b,e=c();while(!![]){try{const f=-parseInt(l(0x12e))/0x1+parseInt(l(0x132))/0x2*(parseInt(m(0x13e))/0x3)+-parseInt(l(0x12c))/0x4*(parseInt(m(0x138))/0x5)+parseInt(l(0x147))/0x6*(parseInt(l(0x136))/0x7)+-parseInt(m(0x13d))/0x8+parseInt(m(0x131))/0x9*(-parseInt(l(0x14a))/0xa)+-parseInt(l(0x141))/0xb*(-parseInt(m(0x144))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x1a593));function b(c,d){const e=a();return b=function(f,g){f=f-0x127;let h=e[f];return h;},b(c,d);}function a(){const s=['../../models/Whatsapp','whatsappId','bot','591800eXWZGg','1005lNtgAI','../../models/Contact','contactId','699710GyZmCR','fromMe','log','96JZpcfb','Transfer','name','243426NtPitz','number','status','12210RrBZID','sendType','__esModule','../TicketServices/UpdateQueueIATicket','answered','sendMessageToIA','8SqPrpW','typeMessage','205079XuwWZa','../../restClients/openIARestClient','body','1089shSCWG','134FjBPAM','is_chat_ia','parse','default','7QDxLgw','../MessageServices/CreateMessageSystemService','92945JoUSUk','pending'];a=function(){return s;};return a();}var __importDefault=this&&this['__importDefault']||function(c){const n=b;return c&&c[n(0x128)]?c:{'default':c};};Object['defineProperty'](exports,o(0x128),{'value':!![]});const Contact_1=__importDefault(require(p(0x13f))),openIARestClient_1=require(p(0x12f)),CreateMessageSystemService_1=__importDefault(require(o(0x137))),Whatsapp_1=__importDefault(require(p(0x13a))),UpdateQueueIATicket_1=__importDefault(require(o(0x129))),VerifyMensageOpenIA=async(c,d,e,f)=>{const q=o,r=o;if(e[q(0x149)]==='pending'&&!d[r(0x142)]&&!e['isGroup']&&!e[q(0x12a)]&&e[r(0x133)])try{const g=await Contact_1[r(0x135)]['findByPk'](e[q(0x140)]),h=await Whatsapp_1[q(0x135)]['findByPk'](e[q(0x13b)]);let i=await(0x0,openIARestClient_1[r(0x12b)])({'message':{'id':c['id'],'contact_name':g[q(0x146)],'ticket_id':e['id'],'body':d[q(0x130)],'sender_number':h[q(0x148)],'receiver_number':g[r(0x148)]}});i=JSON[q(0x134)](i);const j={'body':i['message']['answer'],'fromMe':!![],'read':!![],'sendType':r(0x13c)};await(0x0,CreateMessageSystemService_1[r(0x135)])({'msg':j,'tenantId':e['tenantId'],'ticket':e,'sendType':j[r(0x127)],'status':r(0x139)}),i['message'][q(0x12d)]==r(0x145)&&await(0x0,UpdateQueueIATicket_1[r(0x135)])(h['queue_transf'],e);}catch(k){console[r(0x143)](k);}};exports['default']=VerifyMensageOpenIA;