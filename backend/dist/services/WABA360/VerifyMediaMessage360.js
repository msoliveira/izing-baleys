'use strict';const o=b,p=b;(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=-parseInt(m(0xf4))/0x1+parseInt(m(0xfd))/0x2+-parseInt(n(0xf2))/0x3*(parseInt(n(0xfb))/0x4)+parseInt(n(0xe9))/0x5+parseInt(m(0xf6))/0x6+-parseInt(m(0xef))/0x7+parseInt(m(0xeb))/0x8;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x8061a));function a(){const s=['body','6766186yxzXBe','chat','received','138ogqMkM','fromMe','674794pNWkXN','includes','4338132DiVGgg','getTime','type','__importDefault','__esModule','91316WMrFKO','default','61572tprpKt','2967765kfweAt','timestamp','14960120RhszTp','template','sended'];a=function(){return s;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0xe9;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this[o(0xf9)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object['defineProperty'](exports,o(0xfa),{'value':!![]});const CreateMessageService_1=__importDefault(require('../MessageServices/CreateMessageService')),GetMediaWaba360_1=__importDefault(require('./GetMediaWaba360')),VerifyMediaMessage=async(c,d,e,f)=>{const q=p,r=p;let g;try{g=await(0x0,GetMediaWaba360_1[q(0xfc)])({'channel':c,'msg':d,'ticket':e});}catch(k){}let h;if(!['text',q(0xf0),r(0xec)][r(0xf5)](d[r(0xf8)])){const l=d;h=l[d['type']]['id'];}const i={'messageId':d['id']||'','ticketId':e['id'],'contactId':d['fromMe']?undefined:f['id'],'body':d?.['text']?.['body']||g||'','fromMe':d['fromMe'],'read':d['fromMe'],'mediaUrl':g,'mediaType':d[q(0xf8)],'timestamp':+d[q(0xea)],'wabaMediaId':h,'status':d['fromMe']?q(0xed):r(0xf1)};await e['update']({'lastMessage':d?.['text']?.[r(0xee)]||g,'lastMessageAt':new Date()[q(0xf7)](),'answered':d[r(0xf3)]||![]});const j=await(0x0,CreateMessageService_1[q(0xfc)])({'messageData':i,'tenantId':e['tenantId']});return j;};exports[p(0xfc)]=VerifyMediaMessage;