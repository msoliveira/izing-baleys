'use strict';const n=b,o=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0x1ff))/0x1+parseInt(l(0x1f6))/0x2+parseInt(k(0x1f7))/0x3+-parseInt(k(0x1fb))/0x4*(-parseInt(l(0x1f8))/0x5)+parseInt(k(0x1f5))/0x6*(-parseInt(k(0x1f4))/0x7)+parseInt(l(0x1f2))/0x8*(-parseInt(k(0x1ee))/0x9)+parseInt(l(0x208))/0xa*(-parseInt(k(0x1f3))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xdb4fd));function b(c,d){const e=a();return b=function(f,g){f=f-0x1ee;let h=e[f];return h;},b(c,d);}function a(){const t=['defineProperty','OPENING','tenantId',':whatsappSession','CHECK_INTERVAL','logger','error','emit','70TtROmM','CONNECTED','StartWaba360','../../utils/logger','ERROR:\x20checkMessages\x20Tenant:\x20','env','update','87678TdCZHv','ConexÃ£o\x20Waba\x20360\x20iniciada\x20|\x20Empresa:\x20','UrlWabaWebHook','getIO','272xnxwRL','3347993aMZOdw','35CmJELh','1670226DzXsVC','3061772BNjffF','5295045SRQkdp','643285rKuyTU','SetWebHookUrl\x20360\x20|\x20Error:\x20','tokenAPI','8TyOTPF','__esModule','../../errors/AppError','default','1198710gJzFrk'];a=function(){return t;};return a();}var __importDefault=this&&this['__importDefault']||function(c){const m=b;return c&&c[m(0x1fc)]?c:{'default':c};};Object[n(0x200)](exports,o(0x1fc),{'value':!![]}),exports[o(0x20a)]=void 0x0;const AppError_1=__importDefault(require(o(0x1fd))),socket_1=require('../../libs/socket'),logger_1=require(o(0x20b)),SetWebHookUrl_1=__importDefault(require('./SetWebHookUrl')),Waba360SendMessagesSystem_1=__importDefault(require('./Waba360SendMessagesSystem')),checkingWaba360={},checkMessagesWaba360=async c=>{const p=n,q=n;if(checkingWaba360[c['tenantId']])return;checkingWaba360[c[p(0x202)]]=!![];try{await(0x0,Waba360SendMessagesSystem_1[p(0x1fe)])(c);}catch(d){logger_1[p(0x205)][q(0x206)](p(0x20c)+c[q(0x202)]+'::',d);}checkingWaba360[c['tenantId']]=![];},StartWaba360=async c=>{const r=n,s=n,d=(0x0,socket_1[r(0x1f1)])();await c[r(0x20e)]({'status':r(0x201)}),d[r(0x207)](c[s(0x202)]+r(0x203),{'action':'update','session':c});try{await(0x0,SetWebHookUrl_1[s(0x1fe)])({'url':c[s(0x1f0)]||'','apiKey':c[r(0x1fa)]});const e='';logger_1[s(0x205)]['info'](r(0x1ef)+c['tenantId']),await c[s(0x20e)]({'status':r(0x209),'number':e}),setInterval(checkMessagesWaba360,+(process[r(0x20d)][r(0x204)]||0x1388),c),d['emit'](c[s(0x202)]+r(0x203),{'action':'update','session':c});}catch(f){logger_1[r(0x205)][r(0x206)](s(0x1f9)+f),await c[s(0x20e)]({'status':'DISCONNECTED'}),d[r(0x207)](c[s(0x202)]+s(0x203),{'action':s(0x20e),'session':c});throw new AppError_1['default']('ERROR_CONNECT_WABA_360:\x20'+f,0x194);}};exports['StartWaba360']=StartWaba360;