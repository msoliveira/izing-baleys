'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0x188;let h=e[f];return h;},b(c,d);}const m=b,o=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0x191))/0x1+-parseInt(k(0x19d))/0x2+-parseInt(l(0x1a0))/0x3+parseInt(l(0x189))/0x4+-parseInt(k(0x197))/0x5+parseInt(l(0x19c))/0x6+parseInt(l(0x19e))/0x7;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x76f38));var __importDefault=this&&this[m(0x194)]||function(c){const n=m;return c&&c[n(0x18e)]?c:{'default':c};};Object[o(0x1a3)](exports,m(0x18e),{'value':!![]}),exports[m(0x18f)]=void 0x0;const AppError_1=__importDefault(require('../../errors/AppError')),socket_1=require(o(0x19a)),logger_1=require(m(0x18b)),SetWebHookUrl_1=__importDefault(require(o(0x199))),Waba360SendMessagesSystem_1=__importDefault(require('./Waba360SendMessagesSystem')),checkingWaba360={},checkMessagesWaba360=async c=>{const p=m,q=m;if(checkingWaba360[c[p(0x1a2)]])return;checkingWaba360[c[q(0x1a2)]]=!![];try{await(0x0,Waba360SendMessagesSystem_1['default'])(c);}catch(d){logger_1[q(0x1a1)][q(0x196)](p(0x192)+c[p(0x1a2)]+'::',d);}checkingWaba360[c[q(0x1a2)]]=![];},StartWaba360=async c=>{const r=o,s=m,d=(0x0,socket_1[r(0x1a4)])();await c['update']({'status':'OPENING'}),d[s(0x18c)](c[r(0x1a2)]+s(0x19f),{'action':r(0x188),'session':c});try{await(0x0,SetWebHookUrl_1[r(0x193)])({'url':c[s(0x18d)]||'','apiKey':c['tokenAPI']});const e='';logger_1[r(0x1a1)][r(0x195)](s(0x19b)+c[s(0x1a2)]),await c[r(0x188)]({'status':s(0x190),'number':e}),setInterval(checkMessagesWaba360,+(process[r(0x198)]['CHECK_INTERVAL']||0x1388),c),d['emit'](c[s(0x1a2)]+r(0x19f),{'action':s(0x188),'session':c});}catch(f){logger_1['logger']['error']('SetWebHookUrl\x20360\x20|\x20Error:\x20'+f),await c[s(0x188)]({'status':'DISCONNECTED'}),d['emit'](c[s(0x1a2)]+s(0x19f),{'action':'update','session':c});throw new AppError_1[(s(0x193))](r(0x18a)+f,0x194);}};function a(){const t=['2138056vOyfVO','ERROR_CONNECT_WABA_360:\x20','../../utils/logger','emit','UrlWabaWebHook','__esModule','StartWaba360','CONNECTED','884440bKejEV','ERROR:\x20checkMessages\x20Tenant:\x20','default','__importDefault','info','error','4844755iLkEfG','env','./SetWebHookUrl','../../libs/socket','Conex√£o\x20Waba\x20360\x20iniciada\x20|\x20Empresa:\x20','1964916QfLedu','699626dAEOqg','6922307HdAmCn',':whatsappSession','2788059EpRxuY','logger','tenantId','defineProperty','getIO','update'];a=function(){return t;};return a();}exports[o(0x18f)]=StartWaba360;