'use strict';const o=b,p=b;(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=parseInt(m(0x151))/0x1+parseInt(n(0x146))/0x2*(parseInt(m(0x149))/0x3)+-parseInt(m(0x158))/0x4*(-parseInt(n(0x15a))/0x5)+-parseInt(m(0x154))/0x6*(parseInt(n(0x152))/0x7)+parseInt(n(0x144))/0x8+-parseInt(n(0x14b))/0x9*(parseInt(n(0x14e))/0xa)+-parseInt(m(0x153))/0xb;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xa8ba2));var __importDefault=this&&this[o(0x141)]||function(c){return c&&c['__esModule']?c:{'default':c};};function b(c,d){const e=a();return b=function(f,g){f=f-0x13e;let h=e[f];return h;},b(c,d);}function a(){const s=['defineProperty','5768376FzGFVr','text','8JqtrNd','../../utils/logger','error','308739afFieo','./VerifyContactWaba360','4329MUDpHL','type','./VerifyMediaMessage360','80ARqZWY','waba','isFarewellMessage','1258177eOzvqu','7HxPXMD','11482933FoyWZA','4439478zHsZge','messages','isCampaignMessage','default','1368TmxyCk','tenantId','1285elkMkP','__esModule','logger','../TicketServices/FindOrCreateTicketService','__importDefault','./VerifyMessage360'];a=function(){return s;};return a();}Object[o(0x143)](exports,p(0x13e),{'value':!![]});const logger_1=require(p(0x147)),FindOrCreateTicketService_1=__importDefault(require(o(0x140))),ShowWhatsAppService_1=__importDefault(require('../WhatsappService/ShowWhatsAppService')),VerifyContactWaba360_1=__importDefault(require(o(0x14a))),VerifyMediaMessage360_1=__importDefault(require(p(0x14d))),VerifyMessage360_1=__importDefault(require(o(0x142))),HandleMessage360=async(c,d)=>{return new Promise((e,f)=>{((async()=>{const q=b,r=b;let g,h;const i=0x1;try{g=await(0x0,ShowWhatsAppService_1['default'])({'id':d}),h=await(0x0,VerifyContactWaba360_1[q(0x157)])(c['contacts'][0x0],g[r(0x159)]);const j={...c[q(0x155)][0x0],'fromMe':![],'message_id':c[r(0x155)][0x0]['id']},k=await(0x0,FindOrCreateTicketService_1['default'])({'contact':h,'whatsappId':g['id'],'unreadMessages':i,'tenantId':g['tenantId'],'msg':j,'channel':r(0x14f)});if(k?.[r(0x156)]){e();return;}if(k?.[q(0x150)]){e();return;}j[q(0x14c)]!==q(0x145)?await(0x0,VerifyMediaMessage360_1[r(0x157)])(g,j,k,h):await(0x0,VerifyMessage360_1[r(0x157)])(j,k,h),e();}catch(l){logger_1[r(0x13f)][r(0x148)](l),f(l);}})());});};exports[o(0x157)]=HandleMessage360;