'use strict';const I=b,J=b;(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=parseInt(G(0x19f))/0x1*(parseInt(H(0x183))/0x2)+parseInt(G(0x184))/0x3+parseInt(G(0x1a5))/0x4+parseInt(H(0x194))/0x5+-parseInt(G(0x186))/0x6+-parseInt(G(0x19c))/0x7+-parseInt(H(0x1a2))/0x8;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x5614d));var __createBinding=this&&this[I(0x180)]||(Object[I(0x18c)]?function(c,d,e,f){const K=I,L=J;if(f===undefined)f=e;var g=Object['getOwnPropertyDescriptor'](d,e);(!g||(K(0x1a3)in g?!d['__esModule']:g['writable']||g[K(0x189)]))&&(g={'enumerable':!![],'get':function(){return d[e];}}),Object[L(0x190)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[J(0x195)]||(Object[J(0x18c)]?function(c,d){const M=I,N=I;Object[M(0x190)](c,M(0x18f),{'enumerable':!![],'value':d});}:function(c,d){c['default']=d;}),__importStar=this&&this[J(0x18d)]||function(c){const O=I,P=I;if(c&&c[O(0x18b)])return c;var d={};if(c!=null){for(var e in c)if(e!=='default'&&Object[P(0x181)][O(0x19b)][O(0x198)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x1a1)]||function(c){const Q=J;return c&&c[Q(0x18b)]?c:{'default':c};};Object['defineProperty'](exports,J(0x18b),{'value':!![]});function a(){const U=['default','defineProperty','message','tQUCc','../../errors/AppError','3040170LcTWMa','__setModuleDefault','test','boolean','call','This\x20whatsapp\x20name\x20is\x20already\x20used.','findOne','hasOwnProperty','194460HlGRuj','min','../../models/Whatsapp','45yGgwyb','Check-name','__importDefault','9003624pMYjVX','get','validate','2615204NFRYFB','__createBinding','prototype','required','30024MWYqFx','455862cCtYCF','bDsLf','3501042wQRSGN','OPENING','shape','configurable','string','__esModule','create','__importStar','yup'];a=function(){return U;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0x180;let h=e[f];return h;},b(c,d);}const Yup=__importStar(require(I(0x18e))),AppError_1=__importDefault(require(J(0x193))),Whatsapp_1=__importDefault(require(I(0x19e))),AdminCreateChannelService=async({name:c,status:status=I(0x187),isDefault:isDefault=![],tenantId:d,tokenTelegram:e,instagramUser:f,instagramKey:g})=>{const R=I,S=I,h=Yup['object']()[R(0x188)]({'name':Yup[R(0x18a)]()[S(0x182)]()[S(0x19d)](0x2)[S(0x196)](R(0x1a0),R(0x199),async l=>{const T=S;if(l){const m=await Whatsapp_1['default'][T(0x19a)]({'where':{'name':l}});return!m;}return!![];}),'isDefault':Yup[S(0x197)]()['required']()});try{S(0x185)===R(0x185)?await h[S(0x1a4)]({'name':c,'status':status,'isDefault':isDefault}):f={'enumerable':!![],'get':function(){return i[j];}};}catch(m){throw new AppError_1[(S(0x18f))](m[R(0x191)]);}const i=await Whatsapp_1[S(0x18f)][R(0x19a)]({'where':{'tenantId':d}});!i&&(isDefault=!i);let j=null;if(isDefault){if(R(0x192)===R(0x192))j=await Whatsapp_1['default'][R(0x19a)]({'where':{'isDefault':!![],'tenantId':d}}),j&&await j['update']({'isDefault':![]});else{if(n&&o[R(0x18b)])return p;var o={};if(q!=null){for(var p in r)if(p!==R(0x18f)&&s['prototype']['hasOwnProperty'][R(0x198)](t,p))u(o,v,p);}return w(o,x),o;}}const k=await Whatsapp_1[S(0x18f)][R(0x18c)]({'name':c,'status':status,'isDefault':isDefault,'tenantId':d,'tokenTelegram':e,'instagramUser':f,'instagramKey':g});return{'whatsapp':k,'oldDefaultWhatsapp':j};};exports[I(0x18f)]=AdminCreateChannelService;