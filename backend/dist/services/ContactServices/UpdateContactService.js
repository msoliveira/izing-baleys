'use strict';const q=b,s=b;(function(c,d){const o=b,p=b,e=c();while(!![]){try{const f=-parseInt(o(0xc4))/0x1+-parseInt(o(0xb5))/0x2*(-parseInt(p(0xa9))/0x3)+-parseInt(o(0xbf))/0x4+parseInt(o(0xc2))/0x5+parseInt(p(0xae))/0x6*(parseInt(p(0xc6))/0x7)+-parseInt(o(0xb6))/0x8+parseInt(p(0xc5))/0x9;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xc610e));var __importDefault=this&&this[q(0xc0)]||function(c){const r=q;return c&&c[r(0xba)]?c:{'default':c};};Object[s(0xb3)](exports,'__esModule',{'value':!![]});function b(c,d){const e=a();return b=function(f,g){f=f-0xa7;let h=e[f];return h;},b(c,d);}const AppError_1=__importDefault(require(q(0xb2))),socketEmit_1=__importDefault(require(q(0xac))),Contact_1=__importDefault(require(q(0xb7))),ContactCustomField_1=__importDefault(require(q(0xaa))),ContactWallet_1=__importDefault(require(q(0xaf))),UpdateContactService=async({contactData:c,contactId:d,tenantId:e})=>{const t=s,u=s,{email:f,name:g,number:h,extraInfo:i,wallets:j}=c,k=await Contact_1[t(0xab)][t(0xbb)]({'where':{'id':d,'tenantId':e},'attributes':['id','name',u(0xbc),t(0xb0),t(0xc9)],'include':[t(0xb1),u(0xbd),{'association':t(0xc1),'attributes':['id',u(0xa8)]}]});if(!k)throw new AppError_1[(u(0xab))](u(0xc8),0x194);i&&(await Promise[u(0xa7)](i[t(0xbe)](async l=>{const v=t,w=u;await ContactCustomField_1[v(0xab)][w(0xc7)]({...l,'contactId':k['id']});})),await Promise[t(0xa7)](k[t(0xb1)][u(0xbe)](async l=>{const x=u,m=i['findIndex'](n=>n['id']===l['id']);m===-0x1&&await ContactCustomField_1[x(0xab)]['destroy']({'where':{'id':l['id']}});})));if(j){await ContactWallet_1[u(0xab)][t(0xb9)]({'where':{'tenantId':e,'contactId':d}});const l=[];j['forEach'](m=>{const y=t;l[y(0xb4)]({'walletId':!m['id']?m:m['id'],'contactId':d,'tenantId':e});}),await ContactWallet_1[t(0xab)]['bulkCreate'](l);}return await k[u(0xc3)]({'name':g,'number':h,'email':f}),await k[u(0xad)]({'attributes':['id',u(0xa8),u(0xbc),t(0xb0),'profilePicUrl'],'include':[t(0xb1),u(0xbd),{'association':t(0xc1),'attributes':['id',t(0xa8)]}]}),(0x0,socketEmit_1[t(0xab)])({'tenantId':e,'type':t(0xb8),'payload':k}),k;};exports[s(0xab)]=UpdateContactService;function a(){const z=['513940KHNlyT','upsert','ERR_NO_CONTACT_FOUND','profilePicUrl','all','name','3603963uRwRWR','../../models/ContactCustomField','default','../../helpers/socketEmit','reload','6SjgUVk','../../models/ContactWallet','email','extraInfo','../../errors/AppError','defineProperty','push','2NHnsFR','7468344hwaeXJ','../../models/Contact','contact:update','destroy','__esModule','findOne','number','tags','map','3496808FqxMek','__importDefault','wallets','4026600VInMaa','update','1088859DkHhft','14650389RzRBCQ'];a=function(){return z;};return a();}