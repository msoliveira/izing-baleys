'use strict';const q=b,r=b;(function(c,d){const o=b,p=b,e=c();while(!![]){try{const f=parseInt(o(0x12c))/0x1+-parseInt(o(0x122))/0x2*(-parseInt(p(0x12e))/0x3)+-parseInt(o(0x129))/0x4+parseInt(o(0x125))/0x5*(-parseInt(o(0x124))/0x6)+-parseInt(p(0x126))/0x7+parseInt(p(0x11c))/0x8+-parseInt(p(0x12d))/0x9*(-parseInt(p(0x131))/0xa);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x1d154));var __importDefault=this&&this['__importDefault']||function(c){return c&&c['__esModule']?c:{'default':c};};Object[q(0x11f)](exports,q(0x136),{'value':!![]});function a(){const v=['name','2PAuosM','create','6wLPjve','301145WjbbUv','1545159oEoIau','destroy','wallets','818648lzARWf','../../helpers/socketEmit','contact:update','161583iFLDAG','3501JlNYzu','293259Ccmliz','../../models/ContactWallet','email','6830oZfcBb','extraInfo','forEach','tags','default','__esModule','ERR_DUPLICATED_CONTACT','push','reload','637832sbeMQe','profilePicUrl','../../models/Contact','defineProperty','../../errors/AppError'];a=function(){return v;};return a();}const AppError_1=__importDefault(require(q(0x120))),socketEmit_1=__importDefault(require(r(0x12a))),Contact_1=__importDefault(require(r(0x11e))),ContactWallet_1=__importDefault(require(r(0x12f))),CreateContactService=async({name:c,number:d,email:email='',extraInfo:extraInfo=[],profilePicUrl:e,tenantId:f,wallets:g})=>{const s=r,t=q,h=await Contact_1[s(0x135)]['findOne']({'where':{'number':d,'tenantId':f}});if(h)throw new AppError_1['default'](s(0x137));const i=await Contact_1[s(0x135)][t(0x123)]({'name':c,'number':d,'email':email,'extraInfo':extraInfo,'profilePicUrl':e,'tenantId':f},{'include':[s(0x132),s(0x134),{'association':s(0x128),'attributes':['id',s(0x121)]}]});if(g){await ContactWallet_1[t(0x135)][s(0x127)]({'where':{'tenantId':f,'contactId':i['id']}});const j=[];g[s(0x133)](k=>{const u=t;j[u(0x138)]({'walletId':!k['id']?k:k['id'],'contactId':i['id'],'tenantId':f});}),await ContactWallet_1[s(0x135)]['bulkCreate'](j);}return await i[t(0x11b)]({'attributes':['id','name','number',t(0x130),s(0x11d)],'include':['extraInfo',s(0x134),{'association':t(0x128),'attributes':['id',t(0x121)]}]}),(0x0,socketEmit_1['default'])({'tenantId':f,'type':s(0x12b),'payload':i}),i;};function b(c,d){const e=a();return b=function(f,g){f=f-0x11b;let h=e[f];return h;},b(c,d);}exports['default']=CreateContactService;