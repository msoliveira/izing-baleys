'use strict';const m=b,o=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0x77))/0x1+-parseInt(k(0x84))/0x2*(parseInt(l(0x80))/0x3)+-parseInt(l(0x7a))/0x4*(parseInt(k(0x85))/0x5)+parseInt(l(0x7d))/0x6*(parseInt(k(0x7f))/0x7)+-parseInt(l(0x81))/0x8+parseInt(k(0x8b))/0x9*(parseInt(k(0x86))/0xa)+parseInt(l(0x8a))/0xb*(parseInt(k(0x7b))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xc85c5));function a(){const t=['USER_GROUP_NOT_FOUND','4vuyuyt','12Ohjror','create','873696mqXdra','update','7qUwkIw','39UPduSh','2533256AIYjUC','__esModule','default','22282CkmvqP','3729665SMNXZb','4670vToCMQ','groupId','length','__importDefault','2793527zqGdrt','8946pmjBra','../../models/InternalMessage','1164329pgjjlp','./../../models/UsersGroups'];a=function(){return t;};return a();}var __importDefault=this&&this[m(0x89)]||function(c){const n=m;return c&&c[n(0x82)]?c:{'default':c};};Object['defineProperty'](exports,o(0x82),{'value':!![]});const AppError_1=__importDefault(require('../../errors/AppError')),InternalMessage_1=__importDefault(require(o(0x8c))),ReadMessageGroups_1=__importDefault(require('../../models/ReadMessageGroups')),UsersGroups_1=__importDefault(require(m(0x78))),ReadMessageService=async({senderId:c,userId:d,isGroup:e})=>{const p=m,q=m;if(e===![])await InternalMessage_1[p(0x83)][p(0x7e)]({'read':!![]},{'where':{'senderId':c,'receiverId':d}});else{const f=await UsersGroups_1[q(0x83)]['findOne']({'where':{'groupId':c,'userId':d}});!f&&new AppError_1[(p(0x83))](q(0x79),0x194);const g=await InternalMessage_1[p(0x83)]['findAll']({'where':{'groupId':f[p(0x87)]}});g['forEach'](async h=>{const r=p,s=p,i=await ReadMessageGroups_1['default']['findAll']({'where':{'internalMessageId':h['id'],'userGroupId':f['id']}});if(i[r(0x88)]<=0x0){const j={'internalMessageId':h['id'],'userGroupId':f['id']};await ReadMessageGroups_1['default'][r(0x7c)](j);}});}};function b(c,d){const e=a();return b=function(f,g){f=f-0x77;let h=e[f];return h;},b(c,d);}exports[m(0x83)]=ReadMessageService;