'use strict';const I=b,J=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x16a;let h=e[f];return h;},b(c,d);}(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=parseInt(G(0x178))/0x1*(parseInt(H(0x176))/0x2)+parseInt(H(0x194))/0x3+parseInt(G(0x172))/0x4*(-parseInt(H(0x177))/0x5)+parseInt(H(0x186))/0x6*(-parseInt(H(0x191))/0x7)+parseInt(G(0x17f))/0x8*(-parseInt(H(0x188))/0x9)+parseInt(H(0x182))/0xa+-parseInt(G(0x195))/0xb*(-parseInt(H(0x184))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xae458));var __createBinding=this&&this[I(0x17c)]||(Object[I(0x16c)]?function(c,d,e,f){const K=J,L=J;if(f===undefined)f=e;var g=Object[K(0x18e)](d,e);(!g||(K(0x192)in g?!d[L(0x196)]:g[K(0x16a)]||g[K(0x18b)]))&&(g={'enumerable':!![],'get':function(){return d[e];}}),Object[L(0x170)](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[J(0x18d)]||(Object[J(0x16c)]?function(c,d){const M=I,N=I;Object[M(0x170)](c,M(0x171),{'enumerable':!![],'value':d});}:function(c,d){c['default']=d;}),__importStar=this&&this['__importStar']||function(c){const O=J,P=J;if(c&&c[O(0x196)])return c;var d={};if(c!=null){for(var e in c)if(e!==P(0x171)&&Object['prototype'][P(0x173)][O(0x183)](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x17b)]||function(c){const Q=J;return c&&c[Q(0x196)]?c:{'default':c};};Object[I(0x170)](exports,J(0x196),{'value':!![]});const Yup=__importStar(require(I(0x18c))),sequelize_1=require('sequelize'),AppError_1=__importDefault(require(I(0x179))),Whatsapp_1=__importDefault(require(J(0x17e))),UpdateWhatsAppService=async({whatsappData:c,whatsappId:d,tenantId:e})=>{const R=J,S=J,f=Yup[R(0x185)]()[R(0x16e)]({'name':Yup[R(0x17d)]()[R(0x187)](0x2),'isDefault':Yup[R(0x16f)]()}),{name:g,status:h,isDefault:i,session:j,tokenTelegram:k,instagramUser:l,instagramKey:m,isActive:n,type:o,wabaBSP:p,tokenAPI:q,fbPageId:r,farewellMessage:s,chatFlowId:t,is_open_ia:u,queue_transf:v}=c;try{if(R(0x174)!==R(0x180)){await f[S(0x190)]({'name':g,'status':h,'isDefault':i});let w=null;if(i){if(R(0x16b)!==S(0x16b)){if(k===l)m=n;o[p]=q[r];}else w=await Whatsapp_1[S(0x171)]['findOne']({'where':{'isDefault':!![],'tenantId':e,'id':{[sequelize_1['Op'][R(0x193)]]:d}}}),w&&await w['update']({'isDefault':![]});}const x=await Whatsapp_1['default'][S(0x18a)]({'where':{'id':d,'tenantId':e}});if(!x){if('vjyzZ'!==S(0x189))return g&&h[S(0x196)]?i:{'default':j};else throw new AppError_1[(S(0x171))](S(0x181),0x194);}const y={'name':g,'status':h,'session':j,'isDefault':i,'tokenTelegram':k,'instagramUser':l,'isActive':n,'type':o,'wabaBSP':p,'tokenAPI':q,'fbPageId':r,'farewellMessage':s,'chatFlowId':t,'is_open_ia':u,'queue_transf':v};return m&&(y[S(0x16d)]=m),await x['update'](y),{'whatsapp':x,'oldDefaultWhatsapp':w};}else f[R(0x170)](g,'default',{'enumerable':!![],'value':h});}catch(C){if(R(0x18f)!==S(0x175))throw new AppError_1[(S(0x171))](C[S(0x17a)]);else f={'enumerable':!![],'get':function(){return i[j];}};}};function a(){const T=['wuoDt','ERR_NO_WAPP_FOUND','1367800WRQvDT','call','12bWeCNq','object','6QrpMVB','min','1335969BBERTG','vjyzZ','findOne','configurable','yup','__setModuleDefault','getOwnPropertyDescriptor','VhUbg','validate','6672036MNcoQb','get','not','2905773YHZJqD','8898131ChVMAH','__esModule','writable','IixWk','create','instagramKey','shape','boolean','defineProperty','default','48QKGNkU','hasOwnProperty','RXDGi','gMdUa','2521098pgCeYH','319030xDWair','1gKQDnh','../../errors/AppError','message','__importDefault','__createBinding','string','../../models/Whatsapp','40NtluNU'];a=function(){return T;};return a();}exports['default']=UpdateWhatsAppService;