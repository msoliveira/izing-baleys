'use strict';const w=b,x=b;(function(c,d){const u=b,v=b,e=c();while(!![]){try{const f=parseInt(u(0x149))/0x1+parseInt(u(0x158))/0x2*(-parseInt(v(0x13b))/0x3)+parseInt(v(0x14f))/0x4+-parseInt(u(0x156))/0x5*(parseInt(u(0x15a))/0x6)+parseInt(v(0x13c))/0x7*(parseInt(u(0x141))/0x8)+parseInt(u(0x146))/0x9*(parseInt(v(0x145))/0xa)+parseInt(v(0x159))/0xb*(parseInt(v(0x13a))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xc001d));function a(){const A=['AKwNa','telegram','10YGgSJH','3086469qjDKGU','QDAyU','../../models/Whatsapp','622126AgCDsj','waba','gCOyB','update','logger','aXoeB','500200fSipHf','error','getIO','create','__importDefault','../../utils/logger','mitgY','5MiTiaT',':whatsapp','2024328xufPDt','2629FnFyvN','9119706aNeKen','Telegram:\x20favor\x20informar\x20o\x20Token.','DISCONNECTED','ERR_CREATE_WAPP','Instagram:\x20favor\x20informar\x20o\x20Usuário\x20e\x20senha\x20corretamente.','95496uQoVxm','3gnJeIv','7ZpMQRI','../../libs/socket','defineProperty','default','../../errors/AppError','2611976IKJOCn','emit'];a=function(){return A;};return a();}var __importDefault=this&&this[w(0x153)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[w(0x13e)](exports,'__esModule',{'value':!![]});const AppError_1=__importDefault(require(x(0x140))),socket_1=require(w(0x13d)),Whatsapp_1=__importDefault(require(w(0x148))),logger_1=require(x(0x154)),CreateWhatsAppService=async({name:c,status:status=x(0x15c),tenantId:d,tokenTelegram:e,instagramUser:f,instagramKey:g,type:h,wabaBSP:i,tokenAPI:j,fbPageId:k,farewellMessage:l,isDefault:isDefault=![]})=>{const y=w,z=w;if(h===y(0x14a)&&(!j||!i)){if('fOUio'===z(0x143)){f[y(0x14d)][z(0x150)](g);throw new h['default'](z(0x15d),0x194);}else throw new AppError_1[(y(0x13f))]('WABA:\x20favor\x20informar\x20o\x20Token\x20e\x20a\x20BSP');}if(h==='instagram'&&!f){if(y(0x14e)!==z(0x155))throw new AppError_1[(y(0x13f))]('Instagram:\x20favor\x20informar\x20o\x20Usuário\x20e\x20senha\x20corretamente.');else e=!f;}if(h===y(0x144)&&!e)throw new AppError_1[(y(0x13f))]('Telegram:\x20favor\x20informar\x20o\x20Token.');const m=await Whatsapp_1[z(0x13f)]['findOne']({'where':{'tenantId':d,'isDefault':!![]}});!m&&(isDefault=!m);if(isDefault){if(z(0x14b)!=='zySQt')m&&await m[z(0x14c)]({'isDefault':![]});else throw new d[(z(0x13f))](y(0x15b));}try{const q=await Whatsapp_1['default'][y(0x152)]({'name':c,'status':status,'isDefault':isDefault,'tenantId':d,'tokenTelegram':e,'instagramUser':f,'instagramKey':g,'type':h,'wabaBSP':i,'tokenAPI':j,'fbPageId':k,'farewellMessage':l}),r=(0x0,socket_1[z(0x151)])();return r[y(0x142)](d+y(0x157),{'action':'update','whatsapp':q}),{'whatsapp':q,'oldDefaultWhatsapp':m};}catch(s){if(z(0x147)===y(0x147)){logger_1[y(0x14d)]['error'](s);throw new AppError_1['default']('ERR_CREATE_WAPP',0x194);}else throw new d['default'](z(0x139));}};function b(c,d){const e=a();return b=function(f,g){f=f-0x139;let h=e[f];return h;},b(c,d);}exports[w(0x13f)]=CreateWhatsAppService;