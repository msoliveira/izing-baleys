'use strict';const x=b,z=b;function b(c,d){const e=a();return b=function(f,g){f=f-0x1ac;let h=e[f];return h;},b(c,d);}function a(){const C=['Telegram:\x20favor\x20informar\x20o\x20Token.','../../utils/logger','2010hqnUad','ERR_CREATE_WAPP','DyLrS','instagram','emit','__esModule','logger','WABA:\x20favor\x20informar\x20o\x20Token\x20e\x20a\x20BSP','default','update','error','../../errors/AppError','3483432HQsYZc','__importDefault','5CjHssb','6SJWFBH','ZzVDw','telegram','5064196TAYFIW','YKEhE','139224UthhUr','awLXO','4647168IjkyTr','getIO','11FJqTKF','findOne','create','waba','Instagram:\x20favor\x20informar\x20o\x20UsuÃ¡rio\x20e\x20senha\x20corretamente.','4837147SNLKdE','../../models/Whatsapp','CuoJI','1014ENrEZl','21778810uVoDMJ'];a=function(){return C;};return a();}(function(c,d){const v=b,w=b,e=c();while(!![]){try{const f=parseInt(v(0x1ac))/0x1*(parseInt(w(0x1cc))/0x2)+-parseInt(w(0x1c0))/0x3+parseInt(w(0x1be))/0x4*(parseInt(w(0x1ba))/0x5)+-parseInt(w(0x1bb))/0x6*(-parseInt(w(0x1c9))/0x7)+parseInt(w(0x1b8))/0x8+-parseInt(v(0x1c2))/0x9+parseInt(w(0x1cd))/0xa*(-parseInt(w(0x1c4))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xa3cd0));var __importDefault=this&&this[x(0x1b9)]||function(c){const y=x;return c&&c[y(0x1b1)]?c:{'default':c};};Object['defineProperty'](exports,x(0x1b1),{'value':!![]});const AppError_1=__importDefault(require(z(0x1b7))),socket_1=require('../../libs/socket'),Whatsapp_1=__importDefault(require(z(0x1ca))),logger_1=require(z(0x1cf)),CreateWhatsAppService=async({name:c,status:status='DISCONNECTED',tenantId:d,tokenTelegram:e,instagramUser:f,instagramKey:g,type:h,wabaBSP:i,tokenAPI:j,fbPageId:k,farewellMessage:l,isDefault:isDefault=![]})=>{const A=x,B=x;if(h===A(0x1c7)&&(!j||!i))throw new AppError_1[(B(0x1b4))](B(0x1b3));if(h===B(0x1af)&&!f){if(A(0x1cb)==='piTFp')throw new d[(A(0x1b4))](A(0x1ce));else throw new AppError_1['default'](B(0x1c8));}if(h===B(0x1bd)&&!e){if(A(0x1bc)!==A(0x1bc))throw new d[(B(0x1b4))](B(0x1b3));else throw new AppError_1[(A(0x1b4))]('Telegram:\x20favor\x20informar\x20o\x20Token.');}const m=await Whatsapp_1['default'][B(0x1c5)]({'where':{'tenantId':d,'isDefault':!![]}});if(!m){if('RlASH'!==B(0x1ae))isDefault=!m;else return g&&h[B(0x1b1)]?i:{'default':j};}if(isDefault){if('hEPrG'!==B(0x1c1))m&&('rkUyO'!==A(0x1bf)?await m[B(0x1b5)]({'isDefault':![]}):e=!f);else{f[B(0x1b2)][B(0x1b6)](g);throw new h[(B(0x1b4))](B(0x1ad),0x194);}}try{const s=await Whatsapp_1[A(0x1b4)][A(0x1c6)]({'name':c,'status':status,'isDefault':isDefault,'tenantId':d,'tokenTelegram':e,'instagramUser':f,'instagramKey':g,'type':h,'wabaBSP':i,'tokenAPI':j,'fbPageId':k,'farewellMessage':l}),t=(0x0,socket_1[A(0x1c3)])();return t[A(0x1b0)](d+':whatsapp',{'action':A(0x1b5),'whatsapp':s}),{'whatsapp':s,'oldDefaultWhatsapp':m};}catch(u){logger_1['logger'][B(0x1b6)](u);throw new AppError_1['default'](B(0x1ad),0x194);}};exports[x(0x1b4)]=CreateWhatsAppService;