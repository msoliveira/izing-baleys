'use strict';const m=b,n=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=parseInt(k(0x1d2))/0x1*(parseInt(l(0x1de))/0x2)+parseInt(k(0x1e8))/0x3+-parseInt(l(0x1f5))/0x4+-parseInt(l(0x1e9))/0x5+-parseInt(l(0x1eb))/0x6*(-parseInt(k(0x1f1))/0x7)+-parseInt(k(0x1ea))/0x8*(-parseInt(k(0x1e2))/0x9)+-parseInt(l(0x1ec))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x73152));var __importDefault=this&&this[m(0x1df)]||function(c){return c&&c['__esModule']?c:{'default':c};};function b(c,d){const e=a();return b=function(f,g){f=f-0x1d0;let h=e[f];return h;},b(c,d);}Object[m(0x1dd)](exports,m(0x1ef),{'value':!![]});const cache_1=require(n(0x1d8)),Message_1=__importDefault(require(n(0x1e6))),logger_1=require('../utils/logger'),GetTicketWbotBaileys_1=__importDefault(require(m(0x1f4))),socketEmit_1=__importDefault(require(m(0x1db))),SetTicketMessagesAsRead=async c=>{const o=n,p=m;await c[o(0x1d7)]({'unreadMessages':0x0}),await cache_1[p(0x1ed)][p(0x1f0)](p(0x1e0)+c[o(0x1f6)]+':unreads','0');if(c[o(0x1d0)]===o(0x1e7))try{const d=await(0x0,GetTicketWbotBaileys_1[p(0x1dc)])(c),e=await Message_1[p(0x1dc)][p(0x1e1)]({'where':{'ticketId':c['id'],'fromMe':![],'read':![]},'order':[['createdAt',p(0x1ee)]]});e[o(0x1d6)](async f=>{const q=p,r=p,g=JSON[q(0x1e5)](f[r(0x1d9)]);g[q(0x1e3)]&&g['key'][r(0x1e4)]===![]&&await d[r(0x1da)]([g['key']]);}),await Message_1[p(0x1dc)][o(0x1d7)]({'read':!![]},{'where':{'ticketId':c['id'],'read':![]}}),(0x0,socketEmit_1['default'])({'tenantId':c[o(0x1d3)],'type':o(0x1d5),'payload':c});}catch(f){console[p(0x1f3)](f),logger_1[p(0x1d1)][p(0x1f2)](p(0x1d4)+f);}};function a(){const s=['set','666785QZhXZI','warn','log','./GetTicketWbotBaileys','3516624aogVNh','contactId','channel','logger','3AJnXZg','tenantId','Could\x20not\x20mark\x20messages\x20as\x20read.\x20Maybe\x20whatsapp\x20session\x20disconnected?\x20Err:\x20','ticket:update','forEach','update','../libs/cache','dataJson','readMessages','./socketEmit','default','defineProperty','73506ZSMzRC','__importDefault','contacts:','findAll','117XXbKUp','key','fromMe','parse','../models/Message','whatsapp','2258109gZpscJ','2972770nUSgHC','504584fcAWAg','48MjljZI','4998630RtyTcz','cacheLayer','DESC','__esModule'];a=function(){return s;};return a();}exports['default']=SetTicketMessagesAsRead;