'use strict';const p=b,q=b;function a(){const t=['../models/ChatFlow','1953Icceis','10633944MWGADl','1192aZkwGP','channel','2640BMlDud','../services/WhatsappService/ShowWhatsAppService','default','1942188otOyxc','2RmWmOO','whatsappId','from','chatBot','botTicketActive','313765rmNTbb','findByPk','416ENeEHN','userId','20hEiaOT','findOne','1212794btifdw','isGroup','defineProperty','__esModule','../services/TicketServices/CreateLogTicketService','../models/Contact','7OTWELo','chatFlowId','../models/Setting','359394hbfbJy','contactId','tenantId','flow'];a=function(){return t;};return a();}(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=-parseInt(m(0xea))/0x1*(parseInt(n(0xe5))/0x2)+parseInt(m(0xf9))/0x3+-parseInt(n(0xec))/0x4*(-parseInt(n(0x102))/0x5)+-parseInt(m(0xe4))/0x6*(parseInt(n(0xf6))/0x7)+parseInt(n(0x100))/0x8*(-parseInt(m(0xfe))/0x9)+parseInt(m(0xee))/0xa*(-parseInt(n(0xf0))/0xb)+parseInt(m(0xff))/0xc;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x29a48));var __importDefault=this&&this['__importDefault']||function(c){const o=b;return c&&c[o(0xf3)]?c:{'default':c};};Object[p(0xf2)](exports,'__esModule',{'value':!![]});const Contact_1=__importDefault(require(q(0xf5))),Setting_1=__importDefault(require(p(0xf8))),ChatFlow_1=__importDefault(require(p(0xfd))),CreateLogTicketService_1=__importDefault(require(q(0xf4))),IsContactTest_1=__importDefault(require('../services/ChatFlowServices/IsContactTest')),ShowWhatsAppService_1=__importDefault(require(p(0x103))),CheckChatBotFlowWelcome=async c=>{const r=p,s=p;if(c[r(0xed)]||c[r(0xf1)])return;const d=await Setting_1['default'][r(0xef)]({'where':{'key':r(0xe9),'tenantId':c[r(0xfb)]}}),e=await(0x0,ShowWhatsAppService_1[r(0x104)])({'id':c[s(0xe6)],'tenantId':c[r(0xfb)]}),f=e?.[r(0xf7)]||d?.['value'];if(!f)return;const g=await ChatFlow_1[r(0x104)][r(0xef)]({'where':{'id':+f,'tenantId':c[s(0xfb)],'isActive':!![],'isDeleted':![]}});if(!g)return;const h=await Contact_1[s(0x104)][s(0xeb)](c[s(0xfa)]),{celularTeste:i}=g,j=h?.['number'];if(await(0x0,IsContactTest_1[r(0x104)])(j,i,c[r(0x101)]))return;const k=g[r(0xfc)]['lineList']['find'](l=>l[r(0xe7)]==='start');await c['update']({'chatFlowId':g['id'],'stepChatFlow':k['to'],'lastInteractionBot':new Date()}),await(0x0,CreateLogTicketService_1['default'])({'ticketId':c['id'],'type':r(0xe8)});};function b(c,d){const e=a();return b=function(f,g){f=f-0xe4;let h=e[f];return h;},b(c,d);}exports[p(0x104)]=CheckChatBotFlowWelcome;