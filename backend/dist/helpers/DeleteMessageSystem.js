'use strict';const r=b,t=b;(function(c,d){const p=b,q=b,e=c();while(!![]){try{const f=-parseInt(p(0xe2))/0x1+-parseInt(q(0xce))/0x2*(parseInt(p(0xc6))/0x3)+parseInt(p(0xed))/0x4+parseInt(p(0xbe))/0x5*(parseInt(p(0xdf))/0x6)+-parseInt(p(0xd5))/0x7+-parseInt(q(0xc0))/0x8*(-parseInt(q(0xec))/0x9)+parseInt(p(0xe0))/0xa;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x73264));var __importDefault=this&&this[r(0xdb)]||function(c){const s=r;return c&&c[s(0xc5)]?c:{'default':c};};Object[r(0xc7)](exports,r(0xc5),{'value':!![]});function b(c,d){const e=a();return b=function(f,g){f=f-0xbd;let h=e[f];return h;},b(c,d);}const date_fns_1=require(t(0xc2)),Message_1=__importDefault(require(r(0xc4))),Ticket_1=__importDefault(require(t(0xd4))),tbot_1=require('../libs/tbot'),AppError_1=__importDefault(require('../errors/AppError')),socket_1=require(r(0xbd)),wbot_baileys_1=require(r(0xe3)),DeleteMessageSystem=async(c,d,e)=>{const u=r,v=t,f=await Message_1['default'][u(0xeb)]({'where':{'id':c},'include':[{'model':Ticket_1['default'],'as':v(0xcd),'include':[u(0xd3)],'where':{'tenantId':e}}]});if(f){if(u(0xcb)===v(0xdc))throw new d['default'](v(0xc3));else{const j=(0x0,date_fns_1[v(0xde)])(new Date(),(0x0,date_fns_1[v(0xcc)])(f?.['createdAt']));if(j>0x2)throw new AppError_1[(u(0xd0))](u(0xbf));}}if(!f)throw new AppError_1['default']('No\x20message\x20found\x20with\x20this\x20ID.');const {ticket:g}=f;if(g[v(0xe4)]==='whatsapp'){const k=await(0x0,wbot_baileys_1[u(0xe9)])(g[u(0xe1)]),l=JSON[v(0xd7)](f[u(0xe5)]);await k['sendMessage'](l['key'][u(0xe7)],{'delete':l[v(0xdd)]});}if(g['channel']==='telegram'){const m=await(0x0,tbot_1[v(0xcf)])(g[u(0xe1)]);await m[u(0xd1)][v(0xd9)](g['contact'][u(0xea)],+f[v(0xc1)]);}if(g['channel']===v(0xe6)){if(u(0xd8)===u(0xd8))return;else return;}if(g['channel']===v(0xd2)){if(v(0xe8)===u(0xee))return g&&h[u(0xc5)]?i:{'default':j};else return;}await f[v(0xca)]({'isDeleted':!![]});const h=(0x0,socket_1[u(0xda)])();h['to']('tenant:'+e+':'+g['id'])[v(0xc8)](u(0xd6)+e+v(0xc9),{'action':u(0xca),'message':f,'ticket':g,'contact':g['contact']});};exports['default']=DeleteMessageSystem;function a(){const w=['dataJson','instagram','remoteJid','NNrjC','getWbot','telegramId','findOne','37143gXRDzT','905664vZbosG','nenQk','../libs/socket','155CPNesA','No\x20delete\x20message\x20afeter\x202h\x20sended','1256OPRWbH','messageId','date-fns','No\x20message\x20found\x20with\x20this\x20ID.','../models/Message','__esModule','109677LebiRk','defineProperty','emit',':appMessage','update','TzClD','parseJSON','ticket','50bXKQYb','getTbot','default','telegram','messenger','contact','../models/Ticket','1763475OWslPK','tenant:','parse','TUNLG','deleteMessage','getIO','__importDefault','hnEEz','key','differenceInHours','46542pkfAxK','10476330trhEWo','whatsappId','524903AOZIZc','../libs/wbot-baileys','channel'];a=function(){return w;};return a();}