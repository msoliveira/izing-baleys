'use strict';const m=b,n=b;(function(c,d){const k=b,l=b,e=c();while(!![]){try{const f=-parseInt(k(0x102))/0x1*(-parseInt(k(0x119))/0x2)+parseInt(k(0xfe))/0x3*(-parseInt(l(0x112))/0x4)+-parseInt(l(0xfa))/0x5+parseInt(k(0x104))/0x6*(-parseInt(l(0x107))/0x7)+-parseInt(k(0xfd))/0x8*(-parseInt(l(0xfc))/0x9)+-parseInt(l(0x100))/0xa+parseInt(k(0x10c))/0xb*(parseInt(l(0xf9))/0xc);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x4f522));var __importDefault=this&&this[m(0x111)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[m(0x10b)](exports,'__esModule',{'value':!![]});function a(){const q=['default','../libs/wbot-baileys','3964163qzfotJ','mediaUrl','../utils/logger','whatsappId','defineProperty','11DAGpYz','public','path','getMessageOptions','sendMessage','__importDefault','4SmeEdQ','join','@s.whatsapp.net','key','message','SendMessageWhatsappCampaign','update','144640zkifmc','13112184CENtlZ','2308765bLjZpc','campaignContact','2516652DPsQwr','8IGgBIb','867363PAZgor','jobId','195090ILMPHp','mediaName','4IBeust','number','6NxVztO'];a=function(){return q;};return a();}const path_1=require(n(0x10e)),logger_1=require(m(0x109)),CampaignContacts_1=__importDefault(require('../models/CampaignContacts')),wbot_baileys_1=require(n(0x106)),SendMessagesSystemWbotBaileys_1=require('../services/WbotServices/SendMessagesSystemWbotBaileys');function b(c,d){const e=a();return b=function(f,g){f=f-0xf9;let h=e[f];return h;},b(c,d);}exports['default']={'key':m(0x117),'options':{'delay':0x3a98,'attempts':0x2,'removeOnComplete':!![]},async 'handle'({data:c}){const o=n,p=m;try{const d=(0x0,wbot_baileys_1['getWbot'])(c[o(0x10a)]);let e={};const f=c[p(0x103)]+o(0x114);if(c[o(0x108)]){const g=(0x0,path_1[o(0x113)])(__dirname,'..','..',o(0x10d)),h=(0x0,path_1['join'])(g,c[o(0x101)]),i=await(0x0,SendMessagesSystemWbotBaileys_1[o(0x10f)])(c[o(0x101)],h,c[o(0x116)]);i&&(e=await d['sendMessage'](f,{...i}));}else e=await d[p(0x110)](f,{'text':c[p(0x116)]});return await CampaignContacts_1[p(0x105)][p(0x118)]({'messageId':e?.[o(0x115)]['id'],'messageRandom':c['messageRandom'],'body':c[o(0x116)],'mediaName':c[p(0x101)],'timestamp':e?.['messageTimestamp'],'jobId':c[p(0xff)]},{'where':{'id':c[o(0xfb)]['id']}}),e;}catch(j){logger_1['logger']['error']('Error\x20enviar\x20message\x20campaign:\x20'+j);throw new Error(j);}}};