'use strict';function a(){const w=[':whatsappSession','../libs/redisClient','instagram','type','defineProperty','862496rAmqTP','422606PCDpoT','getInstaBot','../utils/logger','693588huGxNA','__esModule','telegram','../services/WhatsappService/UpdateWhatsAppService','whatsapp','catch','status','setValue','Starting\x20session.','ERR_NO_WAPP_FOUND','update','130FtXVuB','close','DISCONNECTED','getWbot','error','../libs/InstaBot','default','../libs/wbot-baileys','../services/WbotServices/StartWhatsAppSession','../libs/socket','json','logOut','removeTbot','__importDefault','removeInstaBot','user','4480qsjTkV','logger','2310LwQsxa','params','logout','1397502NhivCh','getTbot','../errors/AppError','6862926RPMSYv','765DQoELU','../libs/tbot','-retryQrCode','StartWhatsAppSession','Erro\x20ao\x20fazer\x20logout\x20da\x20conexÃ£o','emit','7806pBKJMU'];a=function(){return w;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0x15e;let h=e[f];return h;},b(c,d);}const o=b,p=b;(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=-parseInt(m(0x181))/0x1+-parseInt(m(0x17e))/0x2+parseInt(m(0x171))/0x3*(-parseInt(m(0x168))/0x4)+parseInt(n(0x16a))/0x5*(parseInt(n(0x177))/0x6)+-parseInt(n(0x170))/0x7+parseInt(n(0x17d))/0x8+parseInt(m(0x16d))/0x9*(parseInt(n(0x18c))/0xa);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x87e23));var __importDefault=this&&this[o(0x165)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[p(0x17c)](exports,o(0x182),{'value':!![]});const ShowWhatsAppService_1=__importDefault(require('../services/WhatsappService/ShowWhatsAppService')),StartWhatsAppSession_1=require(o(0x160)),UpdateWhatsAppService_1=__importDefault(require(o(0x184))),redisClient_1=require(o(0x179)),logger_1=require(p(0x180)),tbot_1=require(p(0x172)),InstaBot_1=require(p(0x191)),AppError_1=__importDefault(require(o(0x16f))),socket_1=require(p(0x161)),wbot_baileys_1=require(p(0x15f)),store=async(c,d)=>{const q=o,r=p,{whatsappId:e}=c[q(0x16b)],{tenantId:f}=c[r(0x167)],g=await(0x0,ShowWhatsAppService_1[q(0x15e)])({'id':e,'tenantId':f,'isInternal':!![]});return(0x0,StartWhatsAppSession_1['StartWhatsAppSession'])(g),d['status'](0xc8)[r(0x162)]({'message':'Starting\x20session.'});},update=async(c,d)=>{const s=p,t=o,{whatsappId:e}=c['params'],{tenantId:f}=c[s(0x167)],{whatsapp:g}=await(0x0,UpdateWhatsAppService_1['default'])({'whatsappId':e,'whatsappData':{'session':''},'tenantId':f});return(0x0,StartWhatsAppSession_1[s(0x174)])(g),d[t(0x187)](0xc8)['json']({'message':s(0x189)});},remove=async(c,d)=>{const u=p,v=p,{whatsappId:e}=c[u(0x16b)],{tenantId:f}=c[u(0x167)],g=await(0x0,ShowWhatsAppService_1['default'])({'id':e,'tenantId':f}),h=(0x0,socket_1['getIO'])();try{if(g[u(0x17b)]===u(0x185)){const i=(0x0,wbot_baileys_1[v(0x18f)])(g['id']);await(0x0,redisClient_1[v(0x188)])(g['id']+u(0x173),0x0),await i[u(0x16c)](),i['ws'][v(0x18d)](),(0x0,wbot_baileys_1['removeWbot'])(g['id']);}if(g[u(0x17b)]===v(0x183)){const j=(0x0,tbot_1[v(0x16e)])(g['id']);await j[u(0x183)][u(0x163)]()[u(0x186)](k=>logger_1['logger'][u(0x190)](v(0x175),k)),(0x0,tbot_1[u(0x164)])(g['id']);}if(g[v(0x17b)]===v(0x17a)){const k=(0x0,InstaBot_1[u(0x17f)])(g['id']);await k['destroy'](),(0x0,InstaBot_1[v(0x166)])(g);}await g[u(0x18b)]({'status':v(0x18e),'session':'','qrcode':null,'retries':0x0});}catch(l){logger_1[u(0x169)][v(0x190)](l),await g['update']({'status':'DISCONNECTED','session':'','qrcode':null,'retries':0x0}),h[v(0x176)](g['tenantId']+u(0x178),{'action':u(0x18b),'session':g});throw new AppError_1[(v(0x15e))](v(0x18a),0x194);}return d[v(0x187)](0xc8)[u(0x162)]({'message':'Session\x20disconnected.'});};exports[o(0x15e)]={'store':store,'remove':remove,'update':update};