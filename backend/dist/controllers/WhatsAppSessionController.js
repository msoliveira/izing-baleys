'use strict';const o=b,q=b;function a(){const x=['ERR_NO_WAPP_FOUND','logger','../libs/tbot','../services/WhatsappService/ShowWhatsAppService','1985367bwoJwL','getWbot','5225135fjpBYp','setValue','getIO','__esModule','__importDefault',':whatsappSession','telegram','../libs/redisClient','../services/WhatsappService/UpdateWhatsAppService','../libs/socket','-retryQrCode','removeInstaBot','whatsapp','removeWbot','4435EaepHD','logOut','194ETlSBZ','2176oiCoUR','tenantId','getInstaBot','update','error','instagram','params','StartWhatsAppSession','json','Starting\x20session.','305192GwWqLD','Session\x20disconnected.','getTbot','DISCONNECTED','../errors/AppError','../libs/wbot-baileys','default','4094190GLckVC','user','removeTbot','../libs/InstaBot','964187kgUkbW','status','emit','29943NkRApN','type','../services/WbotServices/StartWhatsAppSession'];a=function(){return x;};return a();}(function(c,d){const m=b,n=b,e=c();while(!![]){try{const f=parseInt(m(0x155))/0x1*(parseInt(m(0x157))/0x2)+parseInt(m(0x145))/0x3+-parseInt(n(0x162))/0x4+parseInt(n(0x147))/0x5+-parseInt(m(0x137))/0x6+parseInt(m(0x13b))/0x7+parseInt(n(0x158))/0x8*(-parseInt(n(0x13e))/0x9);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x95349));var __importDefault=this&&this[o(0x14b)]||function(c){const p=o;return c&&c[p(0x14a)]?c:{'default':c};};Object['defineProperty'](exports,o(0x14a),{'value':!![]});function b(c,d){const e=a();return b=function(f,g){f=f-0x131;let h=e[f];return h;},b(c,d);}const ShowWhatsAppService_1=__importDefault(require(o(0x144))),StartWhatsAppSession_1=require(o(0x140)),UpdateWhatsAppService_1=__importDefault(require(q(0x14f))),redisClient_1=require(o(0x14e)),logger_1=require('../utils/logger'),tbot_1=require(q(0x143)),InstaBot_1=require(q(0x13a)),AppError_1=__importDefault(require(o(0x134))),socket_1=require(q(0x150)),wbot_baileys_1=require(o(0x135)),store=async(c,d)=>{const r=o,s=q,{whatsappId:e}=c[r(0x15e)],{tenantId:f}=c[s(0x138)],g=await(0x0,ShowWhatsAppService_1[s(0x136)])({'id':e,'tenantId':f,'isInternal':!![]});return(0x0,StartWhatsAppSession_1[s(0x15f)])(g),d[s(0x13c)](0xc8)[r(0x160)]({'message':r(0x161)});},update=async(c,d)=>{const t=q,u=q,{whatsappId:e}=c[t(0x15e)],{tenantId:f}=c[t(0x138)],{whatsapp:g}=await(0x0,UpdateWhatsAppService_1[u(0x136)])({'whatsappId':e,'whatsappData':{'session':''},'tenantId':f});return(0x0,StartWhatsAppSession_1[t(0x15f)])(g),d[t(0x13c)](0xc8)[t(0x160)]({'message':t(0x161)});},remove=async(c,d)=>{const v=o,w=q,{whatsappId:e}=c[v(0x15e)],{tenantId:f}=c[v(0x138)],g=await(0x0,ShowWhatsAppService_1[w(0x136)])({'id':e,'tenantId':f}),h=(0x0,socket_1[v(0x149)])();try{if(g[w(0x13f)]===w(0x153)){const i=(0x0,wbot_baileys_1[v(0x146)])(g['id']);await(0x0,redisClient_1[v(0x148)])(g['id']+w(0x151),0x0),await i['logout'](),i['ws']['close'](),(0x0,wbot_baileys_1[v(0x154)])(g['id']);}if(g['type']===v(0x14d)){const j=(0x0,tbot_1[w(0x132)])(g['id']);await j[w(0x14d)][v(0x156)]()['catch'](k=>logger_1['logger'][v(0x15c)]('Erro\x20ao\x20fazer\x20logout\x20da\x20conex√£o',k)),(0x0,tbot_1[w(0x139)])(g['id']);}if(g[w(0x13f)]===w(0x15d)){const k=(0x0,InstaBot_1[w(0x15a)])(g['id']);await k['destroy'](),(0x0,InstaBot_1[v(0x152)])(g);}await g['update']({'status':'DISCONNECTED','session':'','qrcode':null,'retries':0x0});}catch(l){logger_1[w(0x142)][v(0x15c)](l),await g[w(0x15b)]({'status':w(0x133),'session':'','qrcode':null,'retries':0x0}),h[w(0x13d)](g[v(0x159)]+v(0x14c),{'action':v(0x15b),'session':g});throw new AppError_1[(v(0x136))](w(0x141),0x194);}return d['status'](0xc8)[w(0x160)]({'message':w(0x131)});};exports[o(0x136)]={'store':store,'remove':remove,'update':update};