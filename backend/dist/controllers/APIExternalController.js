'use strict';function a(){const R=['__importDefault','1385364AeClGV','string','2keMhUk','configurable','url','3960620mblnmS','471912AMaJkb','APIAuth','3847302bgIqXW','default','ERR_SESSION_NOT_AUTH_TOKEN','436hbcOHJ','__createBinding','get','findOne','status','shape','../libs/Queue','object','1772911ZLEShg','__setModuleDefault','defineProperty','body','add','9uXLAfP','SendMessageAPI','json','../errors/AppError','message','../models/ApiConfig','3181365ghNCwJ','__esModule','yup','number','sessionId','16QXjYFe','params','10295kWBDyX','required','sendMessageAPI','__importStar','create'];a=function(){return R;};return a();}const I=b,J=b;(function(c,d){const G=b,H=b,e=c();while(!![]){try{const f=parseInt(G(0x193))/0x1*(-parseInt(H(0x197))/0x2)+-parseInt(G(0x191))/0x3+parseInt(G(0x19c))/0x4*(parseInt(G(0x18b))/0x5)+parseInt(G(0x199))/0x6+-parseInt(G(0x1a4))/0x7*(-parseInt(H(0x189))/0x8)+parseInt(H(0x1a9))/0x9*(-parseInt(H(0x196))/0xa)+parseInt(H(0x1af))/0xb;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x50f7f));function b(c,d){const e=a();return b=function(f,g){f=f-0x188;let h=e[f];return h;},b(c,d);}var __createBinding=this&&this[I(0x19d)]||(Object[J(0x18f)]?function(c,d,e,f){const K=J,L=I;if(f===undefined)f=e;var g=Object['getOwnPropertyDescriptor'](d,e);(!g||(K(0x19e)in g?!d['__esModule']:g['writable']||g[L(0x194)]))&&(g={'enumerable':!![],'get':function(){return d[e];}}),Object['defineProperty'](c,f,g);}:function(c,d,e,f){if(f===undefined)f=e;c[f]=d[e];}),__setModuleDefault=this&&this[I(0x1a5)]||(Object[J(0x18f)]?function(c,d){const M=I,N=J;Object[M(0x1a6)](c,N(0x19a),{'enumerable':!![],'value':d});}:function(c,d){c['default']=d;}),__importStar=this&&this[I(0x18e)]||function(c){const O=J;if(c&&c['__esModule'])return c;var d={};if(c!=null){for(var e in c)if(e!==O(0x19a)&&Object['prototype']['hasOwnProperty']['call'](c,e))__createBinding(d,c,e);}return __setModuleDefault(d,c),d;},__importDefault=this&&this[I(0x190)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[I(0x1a6)](exports,J(0x1b0),{'value':!![]}),exports[J(0x18d)]=void 0x0;const Yup=__importStar(require(I(0x1b1))),AppError_1=__importDefault(require(I(0x1ac))),ApiConfig_1=__importDefault(require(J(0x1ae))),Queue_1=__importDefault(require(I(0x1a2))),sendMessageAPI=async(c,d)=>{const P=J,Q=I,{tenantId:e,sessionId:f}=c[P(0x198)],{apiId:g}=c[P(0x18a)],h=c['file'],i=await ApiConfig_1['default'][Q(0x19f)]({'where':{'id':g,'tenantId':e}});if(i?.[P(0x188)]!==f)throw new AppError_1[(P(0x19a))](Q(0x19b),0x193);const j={...c[P(0x1a7)],'apiId':g,'sessionId':f,'tenantId':e,'apiConfig':i,'media':h},k=Yup[P(0x1a3)]()['shape']({'apiId':Yup[P(0x192)](),'sessionId':Yup[P(0x1b2)](),'body':Yup[Q(0x192)]()[P(0x18c)](),'number':Yup[P(0x192)]()['required'](),'mediaUrl':Yup[Q(0x192)]()[Q(0x195)]()['nullable']()||Yup[Q(0x1a3)]()[P(0x1a1)]({'destination':Yup[Q(0x192)]()[P(0x18c)](),'encoding':Yup[P(0x192)]()['required'](),'fieldname':Yup['string']()[P(0x18c)](),'filename':Yup[Q(0x192)]()[P(0x18c)](),'mimetype':Yup[P(0x192)]()[P(0x18c)](),'originalname':Yup[P(0x192)]()[P(0x18c)](),'path':Yup['string']()[P(0x18c)](),'size':Yup['number']()[Q(0x18c)]()}),'externalKey':Yup['string']()['required'](),'tenantId':Yup[Q(0x1b2)]()[P(0x18c)]()});try{await k['validate'](j);}catch(l){throw new AppError_1[(Q(0x19a))](l[Q(0x1ad)]);}return Queue_1['default'][Q(0x1a8)](Q(0x1aa),j),d[Q(0x1a0)](0xc8)[P(0x1ab)]({'message':'Message\x20add\x20queue'});};exports[I(0x18d)]=sendMessageAPI;