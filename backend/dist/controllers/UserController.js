'use strict';const s=b,t=b;(function(c,d){const p=b,q=b,e=c();while(!![]){try{const f=parseInt(p(0x1fa))/0x1*(-parseInt(q(0x1f1))/0x2)+-parseInt(q(0x1e6))/0x3*(parseInt(p(0x1e5))/0x4)+-parseInt(p(0x1f2))/0x5+-parseInt(q(0x210))/0x6*(parseInt(q(0x1f3))/0x7)+parseInt(q(0x1ea))/0x8*(parseInt(q(0x1ff))/0x9)+-parseInt(q(0x208))/0xa+parseInt(q(0x1f0))/0xb;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x19407));function b(c,d){const e=a();return b=function(f,g){f=f-0x1d5;let h=e[f];return h;},b(c,d);}var __importDefault=this&&this['__importDefault']||function(c){const r=b;return c&&c[r(0x200)]?c:{'default':c};};Object[s(0x1fc)](exports,'__esModule',{'value':!![]}),exports['showGroups']=exports[t(0x1e3)]=exports[s(0x1f7)]=exports[s(0x20c)]=exports[t(0x1ed)]=exports['show']=exports[t(0x1e8)]=exports['index']=void 0x0;const socket_1=require(t(0x1f6)),CheckSettings_1=__importDefault(require(t(0x1d5))),AppError_1=__importDefault(require(s(0x1e2))),CreateUserService_1=__importDefault(require(s(0x20a))),ListUsersService_1=__importDefault(require(s(0x1ec))),UpdateUserService_1=__importDefault(require(s(0x1dc))),ShowUserService_1=__importDefault(require(t(0x209))),DeleteUserService_1=__importDefault(require(t(0x1e7))),UpdateUserConfigsService_1=__importDefault(require(t(0x1f4))),Tenant_1=__importDefault(require('../models/Tenant')),ListUserChatInterno_1=__importDefault(require(t(0x20f))),ListGroupsByUserId_1=__importDefault(require(s(0x203))),index=async(c,d)=>{const u=t,v=s,{tenantId:e}=c['user'],{searchParam:f,pageNumber:g}=c[u(0x20e)],{users:h,count:i,hasMore:j}=await(0x0,ListUsersService_1[u(0x1d7)])({'searchParam':f,'pageNumber':g,'tenantId':e});return d['json']({'users':h,'count':i,'hasMore':j});};exports[s(0x1f9)]=index;const store=async(c,d)=>{const w=t,x=t,{tenantId:e}=c[w(0x1de)],{email:f,password:g,name:h,profile:i}=c[x(0x1d6)],{users:j}=await(0x0,ListUsersService_1[x(0x1d7)])({'tenantId':e}),k=await Tenant_1['default'][w(0x201)](e);if(j[x(0x1e4)]>=k?.[w(0x1e1)]){if(w(0x1da)===w(0x1da))throw new AppError_1[(x(0x1d7))](w(0x1dd),0x190);else throw new d[(w(0x1d7))](x(0x1fd),0x193);}else{if(c[x(0x1fe)]==='/signup'&&await(0x0,CheckSettings_1[x(0x1d7)])(w(0x1eb))===x(0x204)){if(w(0x205)!==x(0x205))throw new d[(x(0x1d7))](x(0x1dd),0x190);else throw new AppError_1[(w(0x1d7))](x(0x20d),0x193);}else{if(c[x(0x1fe)]!==x(0x1df)&&c['user'][w(0x1f5)]!==w(0x1d8))throw new AppError_1[(x(0x1d7))]('ERR_NO_PERMISSION',0x193);}}const l=await(0x0,CreateUserService_1[w(0x1d7)])({'email':f,'password':g,'name':h,'profile':i,'tenantId':e}),m=(0x0,socket_1[w(0x1db)])();return m['emit'](e+x(0x206),{'action':x(0x1ee),'user':l}),d[x(0x1e0)](0xc8)['json'](l);};exports[s(0x1e8)]=store;const show=async(c,d)=>{const y=s,z=s,{userId:e}=c[y(0x207)],{tenantId:f}=c[y(0x1de)],g=await(0x0,ShowUserService_1['default'])(e,f);return d[y(0x1e0)](0xc8)[y(0x1fb)](g);};exports[t(0x1ef)]=show;const update=async(c,d)=>{const A=t,B=t,{userId:e}=c[A(0x207)],f=c[A(0x1d6)],{tenantId:g}=c['user'],h=await(0x0,UpdateUserService_1[A(0x1d7)])({'userData':f,'userId':e,'tenantId':g}),i=(0x0,socket_1[A(0x1db)])();return i[A(0x202)](g+B(0x206),{'action':A(0x1ed),'user':h}),d[B(0x1e0)](0xc8)[A(0x1fb)](h);};exports[t(0x1ed)]=update;const updateConfigs=async(c,d)=>{const C=t,D=s,{userId:e}=c['params'],f=c[C(0x1d6)],{tenantId:g}=c['user'];return await(0x0,UpdateUserConfigsService_1['default'])({'userConfigs':f,'userId':e,'tenantId':g}),d[D(0x1e0)](0xc8)[C(0x1fb)]();};exports[t(0x20c)]=updateConfigs;const remove=async(c,d)=>{const E=t,F=s,{userId:e}=c[E(0x207)],{tenantId:f}=c['user'],g=c[F(0x1de)]['id'];if(c[E(0x1de)][E(0x1f5)]!==F(0x1d8)){if(E(0x1d9)!=='ePAso')throw new AppError_1[(E(0x1d7))](F(0x1fd),0x193);else return g&&h[F(0x200)]?i:{'default':j};}await(0x0,DeleteUserService_1[F(0x1d7)])(e,f,g);const h=(0x0,socket_1[F(0x1db)])();return h[F(0x202)](f+':user',{'action':F(0x1e9),'userId':e}),d[F(0x1e0)](0xc8)[F(0x1fb)]({'message':F(0x1f8)});};exports[s(0x1f7)]=remove;const chatInterno=async(c,d)=>{const G=s,H=t,{tenantId:e,id:f}=c[G(0x1de)],g=await(0x0,ListUserChatInterno_1[G(0x1d7)])(Number(f),Number(e));return d[H(0x1fb)]({'users':g});};function a(){const K=['params','1196110CAwvaz','../services/UserServices/ShowUserService','../services/UserServices/CreateUserService','showGroups','updateConfigs','ERR_USER_CREATION_DISABLED','query','../services/UserServices/ListUserChatInterno','678LKnDAv','../helpers/CheckSettings','body','default','admin','tEnas','hUuGw','getIO','../services/UserServices/UpdateUserService','ERR_USER_LIMIT_USER_CREATION','user','/signup','status','maxUsers','../errors/AppError','chatInterno','length','4ZKuUvr','87441PAsPHR','../services/UserServices/DeleteUserService','store','delete','8VGBFre','userCreation','../services/UserServices/ListUsersService','update','create','show','7219366YZJLlJ','354980rNtPZz','664250vAtqOi','9926sXOxoZ','../services/UserServices/UpdateUserConfigsService','profile','../libs/socket','remove','User\x20deleted','index','1MpFqUI','json','defineProperty','ERR_NO_PERMISSION','url','598113XLPbBh','__esModule','findByPk','emit','../services/GroupServices/ListGroupsByUserId','disabled','gQGwU',':user'];a=function(){return K;};return a();}exports[t(0x1e3)]=chatInterno;const showGroups=async(c,d)=>{const I=t,J=s,{userId:e}=c[I(0x207)],f=await(0x0,ListGroupsByUserId_1[J(0x1d7)])(Number(e));return d[I(0x1e0)](0xc8)[I(0x1fb)](f);};exports[s(0x20b)]=showGroups;