'use strict';const p=b,q=b;(function(c,d){const n=b,o=b,e=c();while(!![]){try{const f=parseInt(n(0x11a))/0x1*(parseInt(n(0x115))/0x2)+parseInt(n(0x107))/0x3*(-parseInt(o(0x112))/0x4)+-parseInt(n(0x11c))/0x5*(parseInt(o(0xfb))/0x6)+parseInt(n(0xea))/0x7+parseInt(o(0x10b))/0x8+parseInt(n(0x110))/0x9+-parseInt(n(0xf0))/0xa*(-parseInt(n(0x100))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x274b5));var __importDefault=this&&this[p(0x111)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[p(0xf8)](exports,'__esModule',{'value':!![]}),exports['showGroups']=exports['chatInterno']=exports[p(0xfd)]=exports[p(0xf1)]=exports['update']=exports['show']=exports['store']=exports[q(0x102)]=void 0x0;const socket_1=require(p(0x10a)),CheckSettings_1=__importDefault(require(q(0x119))),AppError_1=__importDefault(require(q(0x116))),CreateUserService_1=__importDefault(require(q(0xe7))),ListUsersService_1=__importDefault(require('../services/UserServices/ListUsersService')),UpdateUserService_1=__importDefault(require(p(0xf4))),ShowUserService_1=__importDefault(require(p(0x106))),DeleteUserService_1=__importDefault(require(p(0xf9))),UpdateUserConfigsService_1=__importDefault(require('../services/UserServices/UpdateUserConfigsService')),Tenant_1=__importDefault(require(p(0xff))),ListUserChatInterno_1=__importDefault(require(p(0x108))),ListGroupsByUserId_1=__importDefault(require('../services/GroupServices/ListGroupsByUserId')),index=async(c,d)=>{const r=q,s=q,{tenantId:e}=c[r(0x10f)],{searchParam:f,pageNumber:g}=c[s(0xf2)],{users:h,count:i,hasMore:j}=await(0x0,ListUsersService_1['default'])({'searchParam':f,'pageNumber':g,'tenantId':e});return d[s(0xed)]({'users':h,'count':i,'hasMore':j});};exports[p(0x102)]=index;const store=async(c,d)=>{const t=p,u=q,{tenantId:e}=c['user'],{email:f,password:g,name:h,profile:i}=c[t(0x109)],{users:j}=await(0x0,ListUsersService_1[u(0x105)])({'tenantId':e}),k=await Tenant_1[t(0x105)][u(0x101)](e);if(j[u(0xfe)]>=k?.['maxUsers'])throw new AppError_1[(t(0x105))](u(0x118),0x190);else{if(c['url']==='/signup'&&await(0x0,CheckSettings_1[t(0x105)])(t(0xee))===t(0xeb))throw new AppError_1[(u(0x105))](u(0xe9),0x193);else{if(c[t(0xf3)]!==u(0x10e)&&c[t(0x10f)][u(0x117)]!==t(0x11b))throw new AppError_1[(t(0x105))](t(0x10c),0x193);}}const l=await(0x0,CreateUserService_1['default'])({'email':f,'password':g,'name':h,'profile':i,'tenantId':e}),m=(0x0,socket_1[t(0x10d)])();return m[u(0x104)](e+u(0x114),{'action':t(0xf6),'user':l}),d['status'](0xc8)[t(0xed)](l);};exports[p(0xec)]=store;const show=async(c,d)=>{const v=p,w=q,{userId:e}=c[v(0x113)],{tenantId:f}=c[v(0x10f)],g=await(0x0,ShowUserService_1['default'])(e,f);return d[v(0x103)](0xc8)[v(0xed)](g);};exports['show']=show;const update=async(c,d)=>{const x=p,y=q,{userId:e}=c[x(0x113)],f=c[y(0x109)],{tenantId:g}=c[y(0x10f)],h=await(0x0,UpdateUserService_1['default'])({'userData':f,'userId':e,'tenantId':g}),i=(0x0,socket_1[x(0x10d)])();return i[y(0x104)](g+y(0x114),{'action':x(0xfc),'user':h}),d[x(0x103)](0xc8)[x(0xed)](h);};exports['update']=update;const updateConfigs=async(c,d)=>{const z=q,A=q,{userId:e}=c['params'],f=c[z(0x109)],{tenantId:g}=c['user'];return await(0x0,UpdateUserConfigsService_1['default'])({'userConfigs':f,'userId':e,'tenantId':g}),d[z(0x103)](0xc8)[z(0xed)]();};exports[q(0xf1)]=updateConfigs;function b(c,d){const e=a();return b=function(f,g){f=f-0xe7;let h=e[f];return h;},b(c,d);}const remove=async(c,d)=>{const B=q,C=p,{userId:e}=c['params'],{tenantId:f}=c[B(0x10f)],g=c[B(0x10f)]['id'];if(c[B(0x10f)][B(0x117)]!=='admin'){if(B(0xf5)===B(0xf5))throw new AppError_1[(C(0x105))]('ERR_NO_PERMISSION',0x193);else return g&&h[C(0xf7)]?i:{'default':j};}await(0x0,DeleteUserService_1[C(0x105)])(e,f,g);const h=(0x0,socket_1[C(0x10d)])();return h[B(0x104)](f+B(0x114),{'action':B(0xfa),'userId':e}),d['status'](0xc8)[B(0xed)]({'message':B(0xef)});};exports[p(0xfd)]=remove;const chatInterno=async(c,d)=>{const D=q,E=p,{tenantId:e,id:f}=c[D(0x10f)],g=await(0x0,ListUserChatInterno_1['default'])(Number(f),Number(e));return d[D(0xed)]({'users':g});};exports[p(0xe8)]=chatInterno;const showGroups=async(c,d)=>{const F=q,G=q,{userId:e}=c[F(0x113)],f=await(0x0,ListGroupsByUserId_1[F(0x105)])(Number(e));return d[G(0x103)](0xc8)[F(0xed)](f);};function a(){const H=['440451HPRlPN','__importDefault','622652XsdkyQ','params',':user','32unvllQ','../errors/AppError','profile','ERR_USER_LIMIT_USER_CREATION','../helpers/CheckSettings','2081YwTyfT','admin','5SeDoWW','../services/UserServices/CreateUserService','chatInterno','ERR_USER_CREATION_DISABLED','146706eQclGo','disabled','store','json','userCreation','User\x20deleted','20UEUHOG','updateConfigs','query','url','../services/UserServices/UpdateUserService','qjbaw','create','__esModule','defineProperty','../services/UserServices/DeleteUserService','delete','1374024nJqzmq','update','remove','length','../models/Tenant','2214113kPArej','findByPk','index','status','emit','default','../services/UserServices/ShowUserService','6CcCMpy','../services/UserServices/ListUserChatInterno','body','../libs/socket','1564160yALokP','ERR_NO_PERMISSION','getIO','/signup','user'];a=function(){return H;};return a();}exports['showGroups']=showGroups;