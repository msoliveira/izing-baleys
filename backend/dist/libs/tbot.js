'use strict';const Y=b,Z=b;(function(c,d){const W=b,X=b,e=c();while(!![]){try{const f=parseInt(W(0x19c))/0x1+-parseInt(X(0x193))/0x2*(parseInt(W(0x196))/0x3)+parseInt(X(0x183))/0x4+-parseInt(X(0x189))/0x5+parseInt(X(0x19e))/0x6+-parseInt(X(0x17f))/0x7*(-parseInt(X(0x186))/0x8)+parseInt(W(0x17b))/0x9*(-parseInt(X(0x1a2))/0xa);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xa32e6));Object[Y(0x185)](exports,'__esModule',{'value':!![]}),exports[Y(0x199)]=exports[Z(0x1a0)]=exports[Y(0x19a)]=void 0x0;const telegraf_1=require('telegraf'),socket_1=require(Z(0x1a6)),logger_1=require(Z(0x18d)),TelegramSessions=[],initTbot=async c=>{return new Promise((d,e)=>{const a0=b,a1=b;if(a0(0x18b)!=='KJSDs')try{const g=q[a0(0x18a)](E=>E['id']===w),h=s[g];g!==-0x1&&(w['once'](a1(0x17e),()=>h[a0(0x198)]('SIGINT')),x['once']('SIGTERM',()=>h[a0(0x198)]('SIGTERM')),y[a0(0x181)](g,0x1));}catch(i){A[a0(0x1a3)][a0(0x17c)]('removeTbot\x20|\x20Error:\x20'+i);}else try{const g=(0x0,socket_1[a0(0x18c)])(),h=c[a0(0x1a1)],{tenantId:i}=c,j=new telegraf_1[(a0(0x17d))](c[a1(0x19d)],{});j['id']=c['id'];const k=TelegramSessions['findIndex'](l=>l['id']===c['id']);k===-0x1?(j['id']=c['id'],TelegramSessions[a1(0x18f)](j)):(j['id']=c['id'],TelegramSessions[k]=j),j[a0(0x1a5)](),c['update']({'status':a0(0x195),'qrcode':'','retries':0x0}),g[a0(0x194)](i+a0(0x1a4),{'action':a1(0x187),'session':c}),logger_1[a0(0x1a3)][a1(0x19b)]('Session\x20TELEGRAM:\x20'+h+'\x20-\x20READY\x20'),process[a1(0x180)](a1(0x17e),()=>j[a0(0x198)](a0(0x17e))),process[a0(0x180)](a1(0x188),()=>j[a1(0x198)](a1(0x188))),d(j);}catch(l){if(a0(0x190)!=='sCHjz')c[a0(0x187)]({'status':'DISCONNECTED','qrcode':'','retries':0x0}),logger_1[a0(0x1a3)][a0(0x17c)]('initWbot\x20error\x20|\x20Error:\x20'+l),e(new Error(a0(0x191)));else{const n=(0x0,u[a0(0x18c)])(),o=v[a1(0x1a1)],{tenantId:p}=w,q=new x[(a0(0x17d))](y[a0(0x19d)],{});q['id']=z['id'];const r=A[a0(0x18a)](V=>V['id']===M['id']);r===-0x1?(q['id']=M['id'],N[a1(0x18f)](q)):(q['id']=O['id'],P[r]=q),q[a0(0x1a5)](),G[a1(0x187)]({'status':a0(0x195),'qrcode':'','retries':0x0}),n['emit'](p+a1(0x1a4),{'action':a1(0x187),'session':H}),I['logger'][a1(0x19b)](a1(0x182)+o+a1(0x184)),J[a0(0x180)](a0(0x17e),()=>q[a1(0x198)](a1(0x17e))),K[a0(0x180)]('SIGTERM',()=>q[a0(0x198)]('SIGTERM')),L(q);}}});};exports['initTbot']=initTbot;const getTbot=(c,d=!![])=>{const a2=Z,a3=Z;logger_1['logger']['info'](a2(0x197)+c+a2(0x19f)+d);const e=TelegramSessions[a2(0x18a)](f=>f['id']===c);return TelegramSessions[e];};function b(c,d){const e=a();return b=function(f,g){f=f-0x17b;let h=e[f];return h;},b(c,d);}function a(){const a6=['5710wXVLwV','logger',':whatsappSession','launch','./socket','11106AlUihs','error','Telegraf','SIGINT','8981SKFhEw','once','splice','Session\x20TELEGRAM:\x20','2700688eFWZuG','\x20-\x20READY\x20','defineProperty','7960MNRTEa','update','SIGTERM','5846540lLbMPq','findIndex','KJSDs','getIO','../utils/logger','DISCONNECTED','push','VMZhK','Error\x20starting\x20telegram\x20session.','HBUtY','750922zrHrZh','emit','CONNECTED','9TZdEug','whatsappId:\x20','stop','removeTbot','initTbot','info','576890ljaovw','tokenTelegram','6840288wFLNla','\x20|\x20checkState:\x20','getTbot','name'];a=function(){return a6;};return a();}exports[Y(0x1a0)]=getTbot;const removeTbot=c=>{const a4=Z,a5=Z;try{if(a4(0x192)===a4(0x192)){const d=TelegramSessions[a5(0x18a)](f=>f['id']===c),e=TelegramSessions[d];d!==-0x1&&(process['once'](a5(0x17e),()=>e[a4(0x198)]('SIGINT')),process[a4(0x180)](a4(0x188),()=>e[a4(0x198)]('SIGTERM')),TelegramSessions[a4(0x181)](d,0x1));}else h[a4(0x187)]({'status':a4(0x18e),'qrcode':'','retries':0x0}),i[a5(0x1a3)][a5(0x17c)]('initWbot\x20error\x20|\x20Error:\x20'+j),k(new l(a5(0x191)));}catch(g){logger_1[a5(0x1a3)][a4(0x17c)]('removeTbot\x20|\x20Error:\x20'+g);}};exports['removeTbot']=removeTbot;