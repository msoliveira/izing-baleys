'use strict';const K=b,M=b;(function(c,d){const I=b,J=b,e=c();while(!![]){try{const f=-parseInt(I(0x182))/0x1*(parseInt(J(0x17c))/0x2)+-parseInt(I(0x180))/0x3+-parseInt(J(0x188))/0x4*(-parseInt(J(0x191))/0x5)+-parseInt(I(0x183))/0x6+parseInt(J(0x172))/0x7*(parseInt(J(0x19f))/0x8)+-parseInt(I(0x1a6))/0x9+-parseInt(I(0x195))/0xa*(-parseInt(I(0x174))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x21669));var __importDefault=this&&this[K(0x19d)]||function(c){const L=K;return c&&c[L(0x1a5)]?c:{'default':c};};Object[K(0x171)](exports,M(0x1a5),{'value':!![]}),exports[M(0x197)]=exports[M(0x190)]=exports['initInstaBot']=void 0x0;function a(){const T=['BvjXW','initInstaBot','realtime','2nkDqkE','initWbot\x20error\x20|\x20Error:\x20','instagram-private-api','splice','77310ntzTUE','default','172342fWqBDa','693438FPpqsm','error','session','tUkKn','generateDevice','208hTKCxC','exportState','request','feed','parse','nextTick','Max\x20retries\x20reached.\x20Unable\x20to\x20initialize\x20InstaBot.','findIndex','getInstaBot','17945FRtmJC','push','uQIGv','Not\x20credentials','590nNvmBQ','JBewc','removeInstaBot','fbns','account','instagram_mqtt','logger','logout','__importDefault','uiAMP','152qlkWLp','rsoLa','withFbnsAndRealtime','disconnect','removeWbot\x20|\x20Error:\x20','OeIbv','__esModule','2160126hZaFhC','update','NThhP','defineProperty','94367YIaRvC','paynD','46189YZZBMx','accountLogin','connect','simulate','instagramUser'];a=function(){return T;};return a();}const instagram_private_api_1=require(M(0x17e)),instagram_mqtt_1=require(K(0x19a)),AppError_1=__importDefault(require('../errors/AppError')),logger_1=require('../utils/logger'),sessions=[],initInstaBot=async(c,d=0x5)=>{const N=K,O=K;let e=0x0;while(e<d){if('DpPzY'!=='nRgwZ')try{if(N(0x196)!==O(0x196))e['logger'][N(0x184)](N(0x1a3)+f);else{let g,h;const i='@'+c[O(0x178)],j=c['instagramKey'];if(!i||!j){if('BvjXW'!==O(0x179))k[l][N(0x199)][O(0x19c)](),m[n][O(0x17b)][N(0x1a2)](),o[p][N(0x198)][O(0x1a2)](),q[N(0x17f)](r,0x1);else throw new Error('Not\x20credentials');}if(c&&c[O(0x185)]){if('NThhP'===O(0x170))g=JSON[N(0x18c)](c[O(0x185)]);else try{const o=s[N(0x18f)](H=>H['id']===z['id']);o!==-0x1&&(z[o][O(0x199)]['logout'](),A[o][N(0x17b)][N(0x1a2)](),B[o][N(0x198)][O(0x1a2)](),C[N(0x17f)](o,0x1)),y[O(0x16f)]({'session':''});}catch(p){E['logger'][O(0x184)](N(0x1a3)+p);}}const k=(0x0,instagram_mqtt_1[N(0x1a1)])(new instagram_private_api_1['IgApiClient']());k['id']=c['id'],k['state'][N(0x187)](i),h=await k[N(0x199)]['login'](i,j),k['accountLogin']=h,process[N(0x18d)](async()=>{const P=N;await k[P(0x177)]['postLoginFlow']();}),g=await k[N(0x189)](),await c['update']({'session':g}),await k[O(0x17b)]['connect']({'irisData':await k[O(0x18b)]['directInbox']()[O(0x18a)]()}),await k['fbns'][N(0x176)]({'autoReconnect':!![]});const l=sessions[O(0x18f)](o=>o['id']===c['id']);return l===-0x1?O(0x1a0)!==O(0x173)?(k['id']=c['id'],!k['accountLogin']&&(k['accountLogin']=await k[O(0x199)]['currentUser']()),sessions[O(0x192)](k)):f=g[O(0x18c)](h['session']):(k['id']=c['id'],!k['accountLogin']&&(k[N(0x175)]=await k[O(0x199)]['currentUser']()),sessions[l]=k),k;}}catch(p){if(O(0x19e)===O(0x1a4))throw new d(N(0x194));else logger_1[N(0x19b)][O(0x184)](N(0x17d)+p),e++,await new Promise(r=>setTimeout(r,0x3e8));}else{const s=j[O(0x18f)](w=>w['id']===q['id']);s!==-0x1&&(q[s][O(0x199)][N(0x19c)](),r[s][N(0x17b)][O(0x1a2)](),s[s][N(0x198)][O(0x1a2)](),t[O(0x17f)](s,0x1)),p['update']({'session':''});}}throw new AppError_1[(N(0x181))](O(0x18e),0x194);};exports[M(0x17a)]=initInstaBot;const getInstaBot=c=>{const Q=M,d=sessions[Q(0x18f)](e=>e['id']===c);return sessions[d];};exports[K(0x190)]=getInstaBot;const removeInstaBot=c=>{const R=M,S=M;try{if(R(0x186)!==S(0x193)){const d=sessions['findIndex'](e=>e['id']===c['id']);d!==-0x1&&(sessions[d][S(0x199)][R(0x19c)](),sessions[d][R(0x17b)][R(0x1a2)](),sessions[d][S(0x198)]['disconnect'](),sessions[R(0x17f)](d,0x1)),c['update']({'session':''});}else{const f=f[S(0x18f)](k=>k['id']===f);return h[f];}}catch(f){logger_1['logger'][R(0x184)](R(0x1a3)+f);}};function b(c,d){const e=a();return b=function(f,g){f=f-0x16f;let h=e[f];return h;},b(c,d);}exports[M(0x197)]=removeInstaBot;