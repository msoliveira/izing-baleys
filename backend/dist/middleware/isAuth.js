'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0x71;let h=e[f];return h;},b(c,d);}const C=b,D=b;(function(c,d){const A=b,B=b,e=c();while(!![]){try{const f=parseInt(A(0x77))/0x1+parseInt(A(0x7c))/0x2+parseInt(A(0x86))/0x3*(-parseInt(B(0x82))/0x4)+parseInt(A(0x74))/0x5*(parseInt(A(0x87))/0x6)+parseInt(B(0x71))/0x7+-parseInt(B(0x84))/0x8+-parseInt(B(0x83))/0x9;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x55c51));function a(){const G=['Token\x20was\x20not\x20provided.','defineProperty','602254nTPZSM','../errors/AppError','user','verify','__importDefault','default','1574356RXmgpD','31410zYOeDy','3377888pQoFOo','secret','3xMNTeC','18nCeqjH','1521450uioohv','authorization','fSenq','440905jVBTGW','split','Invalid\x20token.','387608hFSsgI','headers','../config/auth'];a=function(){return G;};return a();}var __importDefault=this&&this[C(0x80)]||function(c){return c&&c['__esModule']?c:{'default':c};};Object[C(0x7b)](exports,'__esModule',{'value':!![]});const jsonwebtoken_1=require('jsonwebtoken'),AppError_1=__importDefault(require(D(0x7d))),auth_1=__importDefault(require(D(0x79))),isAuth=(c,d,e)=>{const E=C,F=C,f=c['headers']['authorization'];if(!f)throw new AppError_1[(E(0x81))]('Token\x20was\x20not\x20provided.',0x193);const [,g]=f[F(0x75)]('\x20');try{const h=(0x0,jsonwebtoken_1[E(0x7f)])(g,auth_1['default'][E(0x85)]),{id:i,profile:j,tenantId:k}=h;c[F(0x7e)]={'id':i,'profile':j,'tenantId':k};}catch(l){if(F(0x73)!==E(0x73)){const n=j[F(0x78)][E(0x72)];if(!n)throw new q[(F(0x81))](F(0x7a),0x193);const [,o]=n[E(0x75)]('\x20');try{const p=(0x0,r['verify'])(o,s['default'][F(0x85)]),{id:q,profile:r,tenantId:s}=p;t[F(0x7e)]={'id':q,'profile':r,'tenantId':s};}catch(t){throw new v[(E(0x81))](E(0x76),0x193);}return p();}else throw new AppError_1['default'](F(0x76),0x193);}return e();};exports['default']=isAuth;