'use strict';function b(c,d){const e=a();return b=function(f,g){f=f-0xab;let h=e[f];return h;},b(c,d);}const D=b,E=b;function a(){const H=['defineProperty','15993EteliJ','../config/auth','524FadDXv','4135RGsjHb','1312dMbWpv','split','verify','jsonwebtoken','Token\x20was\x20not\x20provided.','2kiRhvS','__esModule','38797kqNyqf','21679iWUgOs','SImas','180817hSbCVD','secret','9960zYlkcb','1622046hXqTTt','headers','Invalid\x20token.','10818etrGyL','default','../errors/AppError','1380hbgKTg','authorization','2412YLhQTE'];a=function(){return H;};return a();}(function(c,d){const A=b,B=b,e=c();while(!![]){try{const f=parseInt(A(0xac))/0x1*(parseInt(A(0xbf))/0x2)+parseInt(B(0xb6))/0x3*(parseInt(A(0xb8))/0x4)+parseInt(B(0xb9))/0x5*(-parseInt(B(0xb4))/0x6)+-parseInt(B(0xc2))/0x7*(-parseInt(B(0xba))/0x8)+parseInt(B(0xaf))/0x9*(-parseInt(A(0xab))/0xa)+parseInt(B(0xc1))/0xb*(-parseInt(A(0xb2))/0xc)+-parseInt(A(0xc4))/0xd;if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0xd6a33));var __importDefault=this&&this['__importDefault']||function(c){const C=b;return c&&c[C(0xc0)]?c:{'default':c};};Object[D(0xb5)](exports,D(0xc0),{'value':!![]});const jsonwebtoken_1=require(D(0xbd)),AppError_1=__importDefault(require(E(0xb1))),auth_1=__importDefault(require(E(0xb7))),isAPIAuth=(c,d,e)=>{const F=E,G=E,f=c[F(0xad)][G(0xb3)];if(!f)throw new AppError_1['default'](F(0xbe),0x193);const [,g]=f[F(0xbb)]('\x20');try{const h=(0x0,jsonwebtoken_1[F(0xbc)])(g,auth_1[F(0xb0)][G(0xc5)]),{apiId:i,sessionId:j,tenantId:k}=h;c['APIAuth']={'apiId':i,'sessionId':j,'tenantId':k};}catch(l){if(G(0xc3)==='SImas')throw new AppError_1[(G(0xb0))]('Invalid\x20token.',0x193);else{const n=j[G(0xad)]['authorization'];if(!n)throw new q[(F(0xb0))](F(0xbe),0x193);const [,o]=n['split']('\x20');try{const p=(0x0,r[F(0xbc)])(o,s[G(0xb0)][F(0xc5)]),{apiId:q,sessionId:r,tenantId:s}=p;t['APIAuth']={'apiId':q,'sessionId':r,'tenantId':s};}catch(t){throw new v[(F(0xb0))](G(0xae),0x193);}return p();}}return e();};exports['default']=isAPIAuth;