'use strict';const r=b,t=b;function a(){const w=['1882349CzMVfj','findByPk','headers','Token\x20was\x20not\x20provided.','642396NuEuuo','indexOf','330153owjtPS','Not\x20exists\x20admin\x20domains\x20defined.','bQOos','../errors/AppError','8LmlLre','321151oFjTaU','6LWNUhb','2dPvjEB','1087830KCzpAz','defineProperty','3443JZatZO','__esModule','DRMpr','Not\x20admin\x20permission','Invalid\x20token\x20or\x20not\x20Admin','__importDefault','2250xKVDQR','default','split','1488450bdtcwq','jsonwebtoken','env'];a=function(){return w;};return a();}function b(c,d){const e=a();return b=function(f,g){f=f-0x8f;let h=e[f];return h;},b(c,d);}(function(c,d){const p=b,q=b,e=c();while(!![]){try{const f=-parseInt(p(0x98))/0x1+parseInt(q(0x9a))/0x2*(parseInt(p(0x93))/0x3)+-parseInt(q(0x91))/0x4+-parseInt(q(0xa6))/0x5*(-parseInt(q(0x99))/0x6)+parseInt(p(0xa9))/0x7*(parseInt(p(0x97))/0x8)+parseInt(q(0x9b))/0x9+parseInt(q(0xa3))/0xa*(-parseInt(p(0x9d))/0xb);if(f===d)break;else e['push'](e['shift']());}catch(g){e['push'](e['shift']());}}}(a,0x3be5f));var __importDefault=this&&this[r(0xa2)]||function(c){const s=r;return c&&c[s(0x9e)]?c:{'default':c};};Object[t(0x9c)](exports,r(0x9e),{'value':!![]});const jsonwebtoken_1=require(t(0xa7)),AppError_1=__importDefault(require(t(0x96))),auth_1=__importDefault(require('../config/auth')),User_1=__importDefault(require('../models/User')),isAuthAdmin=async(c,d,e)=>{const u=r,v=r,f=c[u(0x8f)]['authorization'],g=process[u(0xa8)]['ADMIN_DOMAIN'];if(!f)throw new AppError_1[(u(0xa4))](u(0x90),0x193);if(!g)throw new AppError_1['default'](v(0x94),0x193);const [,h]=f[v(0xa5)]('\x20');try{if(v(0x95)!==v(0x9f)){const i=(0x0,jsonwebtoken_1['verify'])(h,auth_1['default']['secret']),{id:j,profile:k,tenantId:l}=i,m=await User_1[u(0xa4)][u(0xaa)](j);if(!m||m['email'][u(0x92)](g)===0x1)throw new AppError_1[(v(0xa4))](u(0xa0),0x193);c['user']={'id':j,'profile':k,'tenantId':l};}else throw new d[(u(0xa4))]('Token\x20was\x20not\x20provided.',0x193);}catch(o){throw new AppError_1[(v(0xa4))](u(0xa1),0x193);}return e();};exports[t(0xa4)]=isAuthAdmin;